var Ze=Object.defineProperty;var qe=(l,e,t)=>e in l?Ze(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var B=(l,e,t)=>qe(l,typeof e!="symbol"?e+"":e,t);import{p as De,a as z,s as H,b as V,u as he,o as _e,c as Fe,g as i,d as I,e as Ce,i as ee,f as Te,t as Oe,h as v,j as Ve,k as Re,l as fe,m as xe,n as Ae,r as ce,q as Be,v as Pe,w as ke,x as D,y as O,z as Q,A as Qe,B as Le,C as $,D as Ke,E as we}from"./external.DeOy8gQN.js";let Je=class{constructor(e,t,n,f){B(this,"model");B(this,"modelCount");B(this,"itemSize");B(this,"estimatedItemSize");B(this,"itemSizeAndPositionData");B(this,"lastMeasuredIndex");B(this,"totalSize");this.model=e,this.itemSize=n,this.modelCount=t,this.estimatedItemSize=f,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,t,n){t!==void 0&&(this.modelCount=t),n!==void 0&&(this.estimatedItemSize=n),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?t(this.model[e],e):Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.modelCount;t++){const n=this.getSize(t);this.itemSizeAndPositionData[t]={offset:e,size:n},e+=n}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.modelCount)throw Error(`Requested index ${e} is outside of range 0..${this.modelCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let n=t.offset+t.size;for(let f=this.lastMeasuredIndex+1;f<=e;f++){const r=this.getSize(f);if(r===void 0||isNaN(r))throw Error(`Invalid size returned for index ${f} of value ${r}`);this.itemSizeAndPositionData[f]={offset:n,size:r},n+=r}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=Se.START,t,n,f){if(t<=0)return 0;const r=this.getSizeAndPositionForIndex(f),c=r.offset,S=c-t+r.size;let u;switch(e){case Se.END:u=S;break;case Se.CENTER:u=c-(t-r.size)/2;break;case Se.START:u=c;break;default:u=Math.max(S,Math.min(c,n))}const k=this.getTotalSize();return Math.max(0,Math.min(k-t,u))}getVisibleRange(e=0,t,n){if(this.getTotalSize()===0)return{start:0,end:0};const r=t+e;let c=this.findNearestItem(t);if(c===void 0)throw Error(`Invalid offset ${t} specified`);const S=this.getSizeAndPositionForIndex(c);t=S.offset+S.size;let u=c;for(;t<r&&u<this.modelCount-1;)u++,t+=this.getSizeAndPositionForIndex(u).size;return n&&(c=Math.max(0,c-n),u=Math.min(u+n,this.modelCount-1)),{start:c,end:u}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,n,e):this.exponentialSearch(n,e)}binarySearch(e,t,n){let f=0,r=0;for(;e<=t;){if(f=e+Math.floor((t-e)/2),r=this.getSizeAndPositionForIndex(f).offset,r===n)return f;r<n?e=f+1:r>n&&(t=f-1)}return e>0?e-1:0}exponentialSearch(e,t){let n=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=n,n*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),t)}};const Ye=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();var Xe=Re('<div><!> <div class="virtual-list-inner svelte-f32i87"></div> <!></div>');function rt(l,e){De(e,!0);const t=z(e,"width",3,"100%"),n=z(e,"model",19,()=>[]),f=z(e,"windowOverPadding",3,3),r=z(e,"scrollDirection",19,()=>q.VERTICAL),c=z(e,"scrollToAlignment",19,()=>Se.AUTO),S=z(e,"scrollToBehaviour",19,()=>Ue.INSTANT),u=z(e,"class",3,"");z(e,"style",3,"");const k=ke(e,["$$slots","$$events","$$legacy","height","width","model","modelCount","itemSize","estimatedItemSize","getKey","scrollToIndex","scrollOffset","windowOverPadding","scrollDirection","scrollToAlignment","scrollToBehaviour","footer","slot","header","onVisibleRangeUpdate","onAfterScroll","class","style"]),te={[q.VERTICAL]:"top",[q.HORIZONTAL]:"left"},X={[q.VERTICAL]:"scrollTop",[q.HORIZONTAL]:"scrollLeft"},g=new Je(n(),e.modelCount,e.itemSize,e.estimatedItemSize);let P=!1,T,ue=H(V([])),x=H(V({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&ie(e.scrollToIndex)||0,scrollChangeReason:ve.REQUESTED})),U={},A={scrollToIndex:e.scrollToIndex,scrollToAlignment:c(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},j={},W=H(""),R=H("");he(()=>{e.scrollToIndex,c(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,le()}),he(()=>{const{offset:s,scrollChangeReason:a}=i(x);(U.offset!==s||U.scrollChangeReason!==a)&&G(),U.offset!==s&&a===ve.REQUESTED&&Z(s),U=i(x)}),he(()=>{e.height,t(),P&&_(0)}),(()=>{if(r()===q.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical'");if(r()===q.HORIZONTAL&&typeof t()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal'");G()})(),_e(()=>{T.addEventListener("scroll",ne,Ye),e.scrollOffset!==void 0?Z(e.scrollOffset):e.scrollToIndex!==void 0&&Z(ie(e.scrollToIndex)),P=!0}),Fe(()=>{P&&T.removeEventListener("scroll",ne)});function le(){if(!P)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset MUST NOT be used together.");const s=A.scrollToIndex!==e.scrollToIndex||A.scrollToAlignment!==c(),a=A.modelCount!==e.modelCount||A.itemSize!==e.itemSize||A.estimatedItemSize!==e.estimatedItemSize;a&&(g.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),_()),A.scrollOffset!==e.scrollOffset?I(x,V({offset:e.scrollOffset||0,scrollChangeReason:ve.REQUESTED})):typeof e.scrollToIndex=="number"&&(s||a)&&I(x,V({offset:ie(e.scrollToIndex,c(),e.modelCount),scrollChangeReason:ve.REQUESTED})),A={scrollToIndex:e.scrollToIndex,scrollToAlignment:c(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function G(){const{offset:s}=i(x);let{start:a,end:m}=g.getVisibleRange(r()===q.VERTICAL?e.height:t(),s,f()),y=[];const Y=g.getTotalSize(),se=typeof e.height=="number"?"px":"",ae=typeof t()=="number"?"px":"";if(r()===q.VERTICAL?(I(W,`height:${e.height}${se};width:${t()}${ae};`),I(R,`flex-direction:column;height:${Y}px;`)):(I(W,`height:${e.height}${se};width:${t()}${ae};`),I(R,`min-height:100%;width:${Y}px;`)),a!==void 0&&m!==void 0){for(let b=a;b<=m;(b+=1)-1)y.push({item:n()[b],index:b,style:ze(b)});if(e.onVisibleRangeUpdate){const b=g.getVisibleRange(r()===q.VERTICAL?e.height:t(),s,0);e.onVisibleRangeUpdate({type:"range.update",start:b.start,end:b.end})}}I(ue,V(y))}function Z(s){"scroll"in T?T.scroll({[te[r()]]:s,behavior:S()}):T[X[r()]]=s}function _(s=0){j={},g.resetItem(s),G()}function ie(s,a=c(),m=e.modelCount){return s<0?s=0:s>=m&&(s=m-1),g.getUpdatedOffsetForIndex(a,r()===q.VERTICAL?e.height:t(),i(x).offset||0,s)}const ne=s=>{const a=T[X[r()]];a<0||i(x).offset===a||s.target!==T||(I(x,V({offset:a,scrollChangeReason:ve.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:a,event:s}))};function ze(s){if(j[s])return j[s];const{size:a,offset:m}=g.getSizeAndPositionForIndex(s);let y;return r()===q.VERTICAL?y=`left:0;width:100%;height:${a}px;position:absolute;top:${m}px;`:y=`top:0;width:${a}px;position:absolute;height:100%;left:${m}px;`,j[s]=y}var N=Xe();Ce(N,s=>T=s,()=>T);let me;var re=xe(N);ee(re,()=>e.header,s=>{var a=D(),m=O(a);Q(m,()=>e.header),v(s,a)});var J=fe(re,2);Te(J,21,()=>i(ue),Ae,(s,a)=>{var m=D(),y=O(m),Y=Qe(()=>({item:i(a).item,style:i(a).style,index:e.getKey?e.getKey(i(a).index):i(a).index}));Q(y,()=>e.slot,()=>i(Y)),v(s,m)}),ce(J);var Ee=fe(J,2);return ee(Ee,()=>e.footer,s=>{var a=D(),m=O(a);Q(m,()=>e.footer),v(s,a)}),ce(N),Oe(()=>{me=Be(N,me,{class:`virtual-list-wrapper $${u()??""}`,style:i(W),...k},"svelte-f32i87"),Pe(J,"style",i(R))}),v(l,N),Ve({recomputeSizes:_})}var Ue=(l=>(l.AUTO="auto",l.SMOOTH="smooth",l.INSTANT="instant",l))(Ue||{}),Se=(l=>(l.AUTO="auto",l.START="start",l.CENTER="center",l.END="end",l))(Se||{}),q=(l=>(l.HORIZONTAL="horizontal",l.VERTICAL="vertical",l))(q||{}),ve=(l=>(l[l.OBSERVED=0]="OBSERVED",l[l.REQUESTED=1]="REQUESTED",l))(ve||{});function Ne(l,e,t={}){t={start:0,end:l.length-1,maxTimes:1e3,...t};let n=t.start,f=t.end;const r=t.returnNearestIfNoHit,c=t.maxTimes;let S,u;n||(n=0,f=l.length-1);let k=0,te=0;for(;n>=0&&n<=f;){if(k>=c)throw Error(`binarySearch: loop times is over ${c}, you can increase the limit.`);S=Math.floor((f-n)/2+n),u=l[S];const X=k+1;if(te=e(u,S,X),te>0)f=S-1;else if(te<0)n=S+1;else return{index:S,value:u,count:X,hit:!0};k++}return r?{index:S,value:u,count:k+1,hit:!1,greater:te>0}:null}const Ge=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();var pe=Re('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),$e=Re('<div class="vtlist-inner"><!> <!> <!></div>'),et=Re("<div><!></div>");function at(l,e){De(e,!0);var t;(function(d){d[d.OBSERVED=0]="OBSERVED",d[d.REQUESTED=1]="REQUESTED"})(t||(t={}));const n=z(e,"items",19,()=>[]),f=z(e,"isDisabled",3,!1),r=z(e,"isHorizontal",3,!1),c=z(e,"isTable",3,!1),S=z(e,"preRenderCount",3,6);z(e,"scrollToAlignment",19,()=>Se.AUTO);const u=z(e,"scrollToBehaviour",19,()=>Ue.INSTANT),k=z(e,"class",3,""),te=z(e,"style",3,"");let X=!1,g,P,T=H(0),ue=H(0),x=100,U=H(0),A=H(S()-1),j=H(0),W=H(V({offset:e.scrollOffset||e.scrollToIndex!==void 0&&1||0,scrollChangeReason:t.REQUESTED})),R;const le=$(()=>{var o;const d=(((o=n())==null?void 0:o.length)||1)-1;return i(A)<d?i(A):d}),G=$(()=>new Array(n().length)),Z=$(()=>n().map((d,o)=>{var E;let h=(E=e.sizingCalculator)==null?void 0:E.call(e,o,d);return h!==void 0||(h=i(G)[o],h!==void 0)?h:i(j)})),_=$(()=>{const d=[];return i(Z).reduce((o,h)=>(d.push(o),o+h),0),d}),ie=$(()=>{if(!n()||f())return[];const d=[];for(let o=i(U);o<=i(le);(o+=1)-1){const h=n()[o];h&&d.push({item:h,index:o,size:i(Z)[o]})}return d}),ne=$(()=>i(_)[i(U)]?i(_)[i(U)]:0),ze=$(()=>i(_).length>0?i(_)[i(_).length-1]+i(Z)[i(Z).length-1]:0),N=$(()=>i(_)[i(le)]?i(ze)-i(_)[i(le)]-i(Z)[i(le)]:0),me=$(()=>we(!f()&&"overflow:auto;",te())),re=$(()=>we(!c()&&"display:flex;",!c()&&(!r()&&"flex-direction:column;"||"flex-direction:row;"),!f()&&(!r()&&`margin-top:${i(ne)}px;margin-bottom:${i(N)}px`||`margin-left:${i(ne)}px;margin-right:${i(N)}px;width:${i(ze)-i(N)-i(ne)}px`)));_e(()=>{g.addEventListener("scroll",J,Ge),X=!0,a()}),Fe(()=>{X&&g.removeEventListener("scroll",J)}),he(()=>{const{offset:d,scrollChangeReason:o}=i(W);((R==null?void 0:R.offset)!==d||(R==null?void 0:R.scrollChangeReason)!==o)&&a(),(R==null?void 0:R.offset)!==d&&o===t.REQUESTED&&b(d),R=i(W)}),he(()=>{var d;return(d=e.onVisibleRangeUpdate)==null?void 0:d.call(e,{type:"range.update",start:i(U),end:i(A)})});function J(d){var h;const o=se(g);d.target!==g||o<0||i(W).offset===o||x-Math.abs(o-i(W).offset)>=1||(I(W,V({offset:o,scrollChangeReason:t.OBSERVED})),(h=e.onAfterScroll)==null||h.call(e,{type:"scroll.update",offset:o,event:d}))}function Ee(){const d=se(g)-ae(g)-x;return Ne(i(_),h=>h-d,{returnNearestIfNoHit:!0}).index}function s(){const d=se(g)-ae(g)+y(g)+x;return Ne(i(_),h=>h-d,{returnNearestIfNoHit:!0}).index}function a(){i(j)||I(j,V(m())),I(U,V(Ee())),I(A,V(s()));let d=0;const o={},h=c()?P.querySelector("tbody").children:P.children;for(let E=0;E<h.length;(E+=1)-1){const F=h[E],L=getComputedStyle(F),M=L.position;if(M&&["absolute","fixed"].includes(M))continue;const C=L.display!=="none"?Y(F):0,w=i(U)+d;o[w]=(o[w]||0)+C,d+=1}for(const E of Object.keys(o)){const F=parseInt(E);i(G)[F]!==o[F]&&(i(G)[F]=o[F])}}function m(){const o=[],h=c()?P.querySelector("tbody").children:P.children;for(let E=0;E<h.length;(E+=1)-1){const F=h[E],L=getComputedStyle(F);if(["absolute","fixed"].includes(L.position))continue;const M=Y(F);if(o.push(M),o.length>=10)break}return o.length===0?0:o.reduce((E,F)=>E+F,0)/o.length}function y(d){const o=getComputedStyle(d);let h=parseFloat(r()?o.width:o.height);return o.boxSizing==="border-box"&&(r()?h-=parseFloat(o.borderLeftWidth)-parseFloat(o.borderRightWidth):h-=parseFloat(o.borderTopWidth)-parseFloat(o.borderBottomWidth)),h}function Y(d){const o=getComputedStyle(d);let h=y(d);return r()?h+=parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth)+parseFloat(o.marginLeft)+parseFloat(o.marginRight):h+=parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth)+parseFloat(o.marginTop)+parseFloat(o.marginBottom),Number.isNaN(h)?0:h}function se(d){return r()?d.scrollLeft:d.scrollTop}function ae(d){const o=getComputedStyle(d);return r()?parseFloat(o.paddingLeft):parseFloat(o.paddingTop)}function b(d){if("scroll"in g){const o={behavior:u()};o[r()?"left":"top"]=d,g.scroll(o)}else g[r()?"scrollLeft":"scrollTop"]=d}var de=et();Ce(de,d=>g=d,()=>g);const je=$(()=>we("vtlist",k()));var We=xe(de);ee(We,c,d=>{var o=pe(),h=O(o);Ce(h,C=>P=C,()=>P);var E=xe(h);ee(E,()=>e.header,C=>{var w=D(),p=O(w);Q(p,()=>e.header),v(C,w)});var F=fe(E),L=xe(F);ee(L,f,C=>{var w=D(),p=O(w);Te(p,17,n,Ae,(oe,ge)=>{var be=D(),Me=O(be);Q(Me,()=>e.vl_slot,()=>i(ge)),v(oe,be)}),v(C,w)},C=>{var w=D(),p=O(w);Te(p,17,()=>i(ie),Ae,(oe,ge)=>{var be=D(),Me=O(be);Q(Me,()=>e.vl_slot,()=>i(ge)),v(oe,be)}),v(C,w)}),ce(F),ce(h);var M=fe(h,2);ee(M,()=>e.footer,C=>{var w=D(),p=O(w);Q(p,()=>e.footer),v(C,w)}),Oe(()=>Pe(h,"style",i(re))),v(d,o)},d=>{var o=$e();Ce(o,L=>P=L,()=>P);var h=xe(o);ee(h,()=>e.header,L=>{var M=D(),C=O(M);Q(C,()=>e.header),v(L,M)});var E=fe(h,2);ee(E,f,L=>{var M=D(),C=O(M);Te(C,17,n,Ae,(w,p)=>{var oe=D(),ge=O(oe);Q(ge,()=>e.vl_slot,()=>i(p)),v(w,oe)}),v(L,M)},L=>{var M=D(),C=O(M);Te(C,17,()=>i(ie),Ae,(w,p)=>{var oe=D(),ge=O(oe);Q(ge,()=>e.vl_slot,()=>i(p)),v(w,oe)}),v(L,M)});var F=fe(E,2);ee(F,()=>e.footer,L=>{var M=D(),C=O(M);Q(C,()=>e.footer),v(L,M)}),ce(o),Oe(()=>Pe(o,"style",i(re))),v(d,o)}),ce(de),Oe(()=>{Ke(de,i(je)),Pe(de,"style",i(me))}),Le(de,"clientHeight",d=>I(T,d)),Le(de,"clientWidth",d=>I(ue,d)),v(l,de),Ve()}class tt{constructor(e,t,n,f){B(this,"model");B(this,"modelCount");B(this,"itemSize");B(this,"estimatedItemSize");B(this,"itemSizeAndPositionData");B(this,"lastMeasuredIndex");B(this,"totalSize");this.model=e,this.itemSize=n,this.modelCount=t,this.estimatedItemSize=f,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,t,n){t!==void 0&&(this.modelCount=t),n!==void 0&&(this.estimatedItemSize=n),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?t(this.model[e],e):Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.modelCount;t++){const n=this.getSize(t);this.itemSizeAndPositionData[t]={offset:e,size:n},e+=n}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.modelCount)throw Error(`Requested index ${e} is outside of range 0..${this.modelCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let n=t.offset+t.size;for(let f=this.lastMeasuredIndex+1;f<=e;f++){const r=this.getSize(f);if(r===void 0||isNaN(r))throw Error(`Invalid size returned for index ${f} of value ${r}`);this.itemSizeAndPositionData[f]={offset:n,size:r},n+=r}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=ye.START,t,n,f){if(t<=0)return 0;const r=this.getSizeAndPositionForIndex(f),c=r.offset,S=c-t+r.size;let u;switch(e){case ye.END:u=S;break;case ye.CENTER:u=c-(t-r.size)/2;break;case ye.START:u=c;break;default:u=Math.max(S,Math.min(c,n))}const k=this.getTotalSize();return Math.max(0,Math.min(k-t,u))}getVisibleRange(e=0,t,n){if(this.getTotalSize()===0)return{start:0,end:0};const r=t+e;let c=this.findNearestItem(t);if(c===void 0)throw Error(`Invalid offset ${t} specified`);const S=this.getSizeAndPositionForIndex(c);t=S.offset+S.size;let u=c;for(;t<r&&u<this.modelCount-1;)u++,t+=this.getSizeAndPositionForIndex(u).size;return n&&(c=Math.max(0,c-n),u=Math.min(u+n,this.modelCount-1)),{start:c,end:u}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,n,e):this.exponentialSearch(n,e)}binarySearch(e,t,n){let f=0,r=0;for(;e<=t;){if(f=e+Math.floor((t-e)/2),r=this.getSizeAndPositionForIndex(f).offset,r===n)return f;r<n?e=f+1:r>n&&(t=f-1)}return e>0?e-1:0}exponentialSearch(e,t){let n=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=n,n*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),t)}}const it=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();var nt=Re('<div><!> <div class="virtual-list-inner svelte-f32i87"></div> <!></div>');function dt(l,e){De(e,!0);const t=z(e,"width",3,"100%"),n=z(e,"model",19,()=>[]),f=z(e,"windowOverPadding",3,3),r=z(e,"scrollDirection",19,()=>K.VERTICAL),c=z(e,"scrollToAlignment",19,()=>ye.AUTO),S=z(e,"scrollToBehaviour",19,()=>He.INSTANT),u=z(e,"class",3,"");z(e,"style",3,"");const k=ke(e,["$$slots","$$events","$$legacy","height","width","model","modelCount","itemSize","estimatedItemSize","getKey","scrollToIndex","scrollOffset","windowOverPadding","scrollDirection","scrollToAlignment","scrollToBehaviour","footer","slot","header","onVisibleRangeUpdate","onAfterScroll","class","style"]),te={[K.VERTICAL]:"top",[K.HORIZONTAL]:"left"},X={[K.VERTICAL]:"scrollTop",[K.HORIZONTAL]:"scrollLeft"},g=new tt(n(),e.modelCount,e.itemSize,e.estimatedItemSize);let P=!1,T,ue=H(V([])),x=H(V({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&ie(e.scrollToIndex)||0,scrollChangeReason:Ie.REQUESTED})),U={},A={scrollToIndex:e.scrollToIndex,scrollToAlignment:c(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},j={},W=H(""),R=H("");he(()=>{e.scrollToIndex,c(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,le()}),he(()=>{const{offset:s,scrollChangeReason:a}=i(x);(U.offset!==s||U.scrollChangeReason!==a)&&G(),U.offset!==s&&a===Ie.REQUESTED&&Z(s),U=i(x)}),he(()=>{e.height,t(),P&&_(0)}),(()=>{if(r()===K.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical'");if(r()===K.HORIZONTAL&&typeof t()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal'");G()})(),_e(()=>{T.addEventListener("scroll",ne,it),e.scrollOffset!==void 0?Z(e.scrollOffset):e.scrollToIndex!==void 0&&Z(ie(e.scrollToIndex)),P=!0}),Fe(()=>{P&&T.removeEventListener("scroll",ne)});function le(){if(!P)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset MUST NOT be used together.");const s=A.scrollToIndex!==e.scrollToIndex||A.scrollToAlignment!==c(),a=A.modelCount!==e.modelCount||A.itemSize!==e.itemSize||A.estimatedItemSize!==e.estimatedItemSize;a&&(g.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),_()),A.scrollOffset!==e.scrollOffset?I(x,V({offset:e.scrollOffset||0,scrollChangeReason:Ie.REQUESTED})):typeof e.scrollToIndex=="number"&&(s||a)&&I(x,V({offset:ie(e.scrollToIndex,c(),e.modelCount),scrollChangeReason:Ie.REQUESTED})),A={scrollToIndex:e.scrollToIndex,scrollToAlignment:c(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function G(){const{offset:s}=i(x);let{start:a,end:m}=g.getVisibleRange(r()===K.VERTICAL?e.height:t(),s,f()),y=[];const Y=g.getTotalSize(),se=typeof e.height=="number"?"px":"",ae=typeof t()=="number"?"px":"";if(r()===K.VERTICAL?(I(W,`height:${e.height}${se};width:${t()}${ae};`),I(R,`flex-direction:column;height:${Y}px;`)):(I(W,`height:${e.height}${se};width:${t()}${ae};`),I(R,`min-height:100%;width:${Y}px;`)),a!==void 0&&m!==void 0){for(let b=a;b<=m;(b+=1)-1)y.push({item:n()[b],index:b,style:ze(b)});if(e.onVisibleRangeUpdate){const b=g.getVisibleRange(r()===K.VERTICAL?e.height:t(),s,0);e.onVisibleRangeUpdate({type:"range.update",start:b.start,end:b.end})}}I(ue,V(y))}function Z(s){"scroll"in T?T.scroll({[te[r()]]:s,behavior:S()}):T[X[r()]]=s}function _(s=0){j={},g.resetItem(s),G()}function ie(s,a=c(),m=e.modelCount){return s<0?s=0:s>=m&&(s=m-1),g.getUpdatedOffsetForIndex(a,r()===K.VERTICAL?e.height:t(),i(x).offset||0,s)}const ne=s=>{const a=T[X[r()]];a<0||i(x).offset===a||s.target!==T||(I(x,V({offset:a,scrollChangeReason:Ie.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:a,event:s}))};function ze(s){if(j[s])return j[s];const{size:a,offset:m}=g.getSizeAndPositionForIndex(s);let y;return r()===K.VERTICAL?y=`left:0;width:100%;height:${a}px;position:absolute;top:${m}px;`:y=`top:0;width:${a}px;position:absolute;height:100%;left:${m}px;`,j[s]=y}var N=nt();Ce(N,s=>T=s,()=>T);let me;var re=xe(N);ee(re,()=>e.header,s=>{var a=D(),m=O(a);Q(m,()=>e.header),v(s,a)});var J=fe(re,2);Te(J,21,()=>i(ue),Ae,(s,a)=>{var m=D(),y=O(m),Y=Qe(()=>({item:i(a).item,style:i(a).style,index:e.getKey?e.getKey(i(a).index):i(a).index}));Q(y,()=>e.slot,()=>i(Y)),v(s,m)}),ce(J);var Ee=fe(J,2);return ee(Ee,()=>e.footer,s=>{var a=D(),m=O(a);Q(m,()=>e.footer),v(s,a)}),ce(N),Oe(()=>{me=Be(N,me,{class:`virtual-list-wrapper $${u()??""}`,style:i(W),...k},"svelte-f32i87"),Pe(J,"style",i(R))}),v(l,N),Ve({recomputeSizes:_})}var He=(l=>(l.AUTO="auto",l.SMOOTH="smooth",l.INSTANT="instant",l))(He||{}),ye=(l=>(l.AUTO="auto",l.START="start",l.CENTER="center",l.END="end",l))(ye||{}),K=(l=>(l.HORIZONTAL="horizontal",l.VERTICAL="vertical",l))(K||{}),Ie=(l=>(l[l.OBSERVED=0]="OBSERVED",l[l.REQUESTED=1]="REQUESTED",l))(Ie||{});export{Se as A,q as D,Ue as S,at as V,rt as a,ye as b,He as c,dt as d};
