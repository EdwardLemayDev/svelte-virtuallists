var We=Object.defineProperty;var qe=(o,e,t)=>e in o?We(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var j=(o,e,t)=>qe(o,typeof e!="symbol"?e+"":e,t);import{p as we,a as I,s as W,b as F,u as de,o as _e,c as Fe,g as i,d as E,e as be,i as $,f as Ie,t as Ce,h as T,j as Ue,k as Me,l as ae,m as Te,n as xe,r as re,q as Le,v as Pe,w as Be,x as D,y as P,z as k,A as Qe,B as Re,C as J,D as Ke,E as Oe}from"./external.C-DTn3zE.js";let Je=class{constructor(e,t,s,r){j(this,"model");j(this,"modelCount");j(this,"itemSize");j(this,"estimatedItemSize");j(this,"itemSizeAndPositionData");j(this,"lastMeasuredIndex");j(this,"totalSize");this.model=e,this.itemSize=s,this.modelCount=t,this.estimatedItemSize=r,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,t,s){t!==void 0&&(this.modelCount=t),s!==void 0&&(this.estimatedItemSize=s),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?t(this.model[e],e):Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.modelCount;t++){const s=this.getSize(t);this.itemSizeAndPositionData[t]={offset:e,size:s},e+=s}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.modelCount)throw Error(`Requested index ${e} is outside of range 0..${this.modelCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let s=t.offset+t.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const l=this.getSize(r);if(l===void 0||isNaN(l))throw Error(`Invalid size returned for index ${r} of value ${l}`);this.itemSizeAndPositionData[r]={offset:s,size:l},s+=l}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=ge.START,t,s,r){if(t<=0)return 0;const l=this.getSizeAndPositionForIndex(r),c=l.offset,v=c-t+l.size;let g;switch(e){case ge.END:g=v;break;case ge.CENTER:g=c-(t-l.size)/2;break;case ge.START:g=c;break;default:g=Math.max(v,Math.min(c,s))}const Q=this.getTotalSize();return Math.max(0,Math.min(Q-t,g))}getVisibleRange(e=0,t,s){if(this.getTotalSize()===0)return{start:0,end:0};const l=t+e;let c=this.findNearestItem(t);if(c===void 0)throw Error(`Invalid offset ${t} specified`);const v=this.getSizeAndPositionForIndex(c);t=v.offset+v.size;let g=c;for(;t<l&&g<this.modelCount-1;)g++,t+=this.getSizeAndPositionForIndex(g).size;return s&&(c=Math.max(0,c-s),g=Math.min(g+s,this.modelCount-1)),{start:c,end:g}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),s=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,s,e):this.exponentialSearch(s,e)}binarySearch(e,t,s){let r=0,l=0;for(;e<=t;){if(r=e+Math.floor((t-e)/2),l=this.getSizeAndPositionForIndex(r).offset,l===s)return r;l<s?e=r+1:l>s&&(t=r-1)}return e>0?e-1:0}exponentialSearch(e,t){let s=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=s,s*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),t)}};const Ze=(()=>{let o=!1;try{const e=Object.defineProperty({},"passive",{get(){return o={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return o})();var Ye=Me('<div><!> <div class="virtual-list-inner svelte-f32i87"></div> <!></div>');function lt(o,e){we(e,!0);const t=I(e,"width",3,"100%"),s=I(e,"model",19,()=>[]),r=I(e,"windowOverPadding",3,3),l=I(e,"scrollDirection",19,()=>K.VERTICAL),c=I(e,"scrollToAlignment",19,()=>ge.AUTO),v=I(e,"scrollToBehaviour",19,()=>Ve.INSTANT),g=I(e,"class",3,"");I(e,"style",3,"");const Q=Be(e,["$$slots","$$events","$$legacy","height","width","model","modelCount","itemSize","estimatedItemSize","getKey","scrollToIndex","scrollOffset","windowOverPadding","scrollDirection","scrollToAlignment","scrollToBehaviour","footer","slot","header","onVisibleRangeUpdate","onAfterScroll","class","style"]),U={[K.VERTICAL]:"top",[K.HORIZONTAL]:"left"},B={[K.VERTICAL]:"scrollTop",[K.HORIZONTAL]:"scrollLeft"},S=new Je(s(),e.modelCount,e.itemSize,e.estimatedItemSize);let O=!1,x,fe=W(F([])),A=W(F({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&se(e.scrollToIndex)||0,scrollChangeReason:ze.REQUESTED})),V={},b={scrollToIndex:e.scrollToIndex,scrollToAlignment:c(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},ee={},Y=W(""),N=W("");de(()=>{e.scrollToIndex,c(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,te()}),de(()=>{const{offset:d,scrollChangeReason:m}=i(A);(V.offset!==d||V.scrollChangeReason!==m)&&X(),V.offset!==d&&m===ze.REQUESTED&&q(d),V=i(A)}),de(()=>{e.height,t(),O&&w(0)}),(()=>{if(l()===K.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical'");if(l()===K.HORIZONTAL&&typeof t()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal'");X()})(),_e(()=>{x.addEventListener("scroll",H,Ze),e.scrollOffset!==void 0?q(e.scrollOffset):e.scrollToIndex!==void 0&&q(se(e.scrollToIndex)),O=!0}),Fe(()=>{O&&x.removeEventListener("scroll",H)});function te(){if(!O)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset MUST NOT be used together.");const d=b.scrollToIndex!==e.scrollToIndex||b.scrollToAlignment!==c(),m=b.modelCount!==e.modelCount||b.itemSize!==e.itemSize||b.estimatedItemSize!==e.estimatedItemSize;m&&(S.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),w()),b.scrollOffset!==e.scrollOffset?E(A,F({offset:e.scrollOffset||0,scrollChangeReason:ze.REQUESTED})):typeof e.scrollToIndex=="number"&&(d||m)&&E(A,F({offset:se(e.scrollToIndex,c(),e.modelCount),scrollChangeReason:ze.REQUESTED})),b={scrollToIndex:e.scrollToIndex,scrollToAlignment:c(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function X(){const{offset:d}=i(A);let{start:m,end:z}=S.getVisibleRange(l()===K.VERTICAL?e.height:t(),d,r()),G=[];const ue=S.getTotalSize(),Se=typeof e.height=="number"?"px":"",ye=typeof t()=="number"?"px":"";if(l()===K.VERTICAL?(E(Y,`height:${e.height}${Se};width:${t()}${ye};`),E(N,`flex-direction:column;height:${ue}px;`)):(E(Y,`height:${e.height}${Se};width:${t()}${ye};`),E(N,`min-height:100%;width:${ue}px;`)),m!==void 0&&z!==void 0){for(let ie=m;ie<=z;(ie+=1)-1)G.push({item:s()[ie],index:ie,style:ce(ie)});if(e.onVisibleRangeUpdate){const ie=S.getVisibleRange(l()===K.VERTICAL?e.height:t(),d,0);e.onVisibleRangeUpdate({type:"range.update",start:ie.start,end:ie.end})}}E(fe,F(G))}function q(d){"scroll"in x?x.scroll({[U[l()]]:d,behavior:v()}):x[B[l()]]=d}function w(d=0){ee={},S.resetItem(d),X()}function se(d,m=c(),z=e.modelCount){return d<0?d=0:d>=z&&(d=z-1),S.getUpdatedOffsetForIndex(m,l()===K.VERTICAL?e.height:t(),i(A).offset||0,d)}const H=d=>{const m=x[B[l()]];m<0||i(A).offset===m||d.target!==x||(E(A,F({offset:m,scrollChangeReason:ze.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:m,event:d}))};function ce(d){if(ee[d])return ee[d];const{size:m,offset:z}=S.getSizeAndPositionForIndex(d);let G;return l()===K.VERTICAL?G=`left:0;width:100%;height:${m}px;position:absolute;top:${z}px;`:G=`top:0;width:${m}px;position:absolute;height:100%;left:${z}px;`,ee[d]=G}var Z=Ye();be(Z,d=>x=d,()=>x);let ne;var he=Te(Z);$(he,()=>e.header,d=>{var m=D(),z=P(m);k(z,()=>e.header),T(d,m)});var f=ae(he,2);Ie(f,21,()=>i(fe),xe,(d,m)=>{var z=D(),G=P(z),ue=Qe(()=>({item:i(m).item,style:i(m).style,index:e.getKey?e.getKey(i(m).index):i(m).index}));k(G,()=>e.slot,()=>i(ue)),T(d,z)}),re(f);var u=ae(f,2);return $(u,()=>e.footer,d=>{var m=D(),z=P(m);k(z,()=>e.footer),T(d,m)}),re(Z),Ce(()=>{ne=Le(Z,ne,{class:`virtual-list-wrapper $${g()??""}`,style:i(Y),...Q},"svelte-f32i87"),Pe(f,"style",i(N))}),T(o,Z),Ue({recomputeSizes:w})}var Ve=(o=>(o.AUTO="auto",o.SMOOTH="smooth",o.INSTANT="instant",o))(Ve||{}),ge=(o=>(o.AUTO="auto",o.START="start",o.CENTER="center",o.END="end",o))(ge||{}),K=(o=>(o.HORIZONTAL="horizontal",o.VERTICAL="vertical",o))(K||{}),ze=(o=>(o[o.OBSERVED=0]="OBSERVED",o[o.REQUESTED=1]="REQUESTED",o))(ze||{});function Ne(o,e,t={}){t={start:0,end:o.length-1,maxTimes:1e3,...t};let s=t.start,r=t.end;const l=t.returnNearestIfNoHit,c=t.maxTimes;let v,g;s||(s=0,r=o.length-1);let Q=0,U=0;for(;s>=0&&s<=r;){if(Q>=c)throw Error(`binarySearch: loop times is over ${c}, you can increase the limit.`);v=Math.floor((r-s)/2+s),g=o[v];const B=Q+1;if(U=e(g,v,B),U>0)r=v-1;else if(U<0)s=v+1;else return{index:v,value:g,count:B,hit:!0};Q++}return l?{index:v,value:g,count:Q+1,hit:!1,greater:U>0}:null}const Xe=(()=>{let o=!1;try{const e=Object.defineProperty({},"passive",{get(){return o={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return o})();var Ge=Me('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),pe=Me('<div class="vtlist-inner"><!> <!> <!></div>'),$e=Me("<div><!></div>");function at(o,e){we(e,!0);var t;(function(a){a[a.OBSERVED=0]="OBSERVED",a[a.REQUESTED=1]="REQUESTED"})(t||(t={}));const s=I(e,"items",19,()=>[]),r=I(e,"isDisabled",3,!1),l=I(e,"isHorizontal",3,!1),c=I(e,"isTable",3,!1),v=I(e,"preRenderCount",3,6);I(e,"scrollToAlignment",19,()=>ge.AUTO);const g=I(e,"scrollToBehaviour",19,()=>Ve.INSTANT),Q=I(e,"class",3,""),U=I(e,"style",3,"");let B=!1,S,O,x=W(0),fe=W(0),A=100,V=W(0),b=W(v()-1),ee=W(0),Y=W(F({offset:e.scrollOffset||e.scrollToIndex!==void 0&&1||0,scrollChangeReason:t.REQUESTED})),N;const te=J(()=>{var n;const a=(((n=s())==null?void 0:n.length)||1)-1;return i(b)<a?i(b):a}),X=J(()=>new Array(s().length)),q=J(()=>s().map((a,n)=>{var y;let h=(y=e.sizingCalculator)==null?void 0:y.call(e,n,a);return h!==void 0||(h=i(X)[n],h!==void 0)?h:i(ee)})),w=J(()=>{const a=[];return i(q).reduce((n,h)=>(a.push(n),n+h),0),a}),se=J(()=>{if(!s()||r())return[];const a=[];for(let n=i(V);n<=i(te);(n+=1)-1){const h=s()[n];h&&a.push({item:h,index:n,size:i(q)[n]})}return a}),H=J(()=>i(w)[i(V)]?i(w)[i(V)]:0),ce=J(()=>i(w).length>0?i(w)[i(w).length-1]+i(q)[i(q).length-1]:0),Z=J(()=>i(w)[i(te)]?i(ce)-i(w)[i(te)]-i(q)[i(te)]:0),ne=J(()=>Oe(!r()&&"overflow:auto;",U())),he=J(()=>Oe(!c()&&"display:flex;",!c()&&(!l()&&"flex-direction:column;"||"flex-direction:row;"),!r()&&(!l()&&`margin-top:${i(H)}px;margin-bottom:${i(Z)}px`||`margin-left:${i(H)}px;margin-right:${i(Z)}px;width:${i(ce)-i(Z)-i(H)}px`)));_e(()=>{S.addEventListener("scroll",f,Xe),B=!0,m()}),Fe(()=>{B&&S.removeEventListener("scroll",f)}),de(()=>{const{offset:a,scrollChangeReason:n}=i(Y);((N==null?void 0:N.offset)!==a||(N==null?void 0:N.scrollChangeReason)!==n)&&m(),(N==null?void 0:N.offset)!==a&&n===t.REQUESTED&&ie(a),N=i(Y)}),de(()=>{var a;return(a=e.onVisibleRangeUpdate)==null?void 0:a.call(e,{type:"range.update",start:i(V),end:i(b)})});function f(a){var h;const n=Se(S);a.target!==S||n<0||i(Y).offset===n||A-Math.abs(n-i(Y).offset)>=1||(E(Y,F({offset:n,scrollChangeReason:t.OBSERVED})),(h=e.onAfterScroll)==null||h.call(e,{type:"scroll.update",offset:n,event:a}))}function u(){const a=Se(S)-ye(S)-A;return Ne(i(w),h=>h-a,{returnNearestIfNoHit:!0}).index}function d(){const a=Se(S)-ye(S)+G(S)+A;return Ne(i(w),h=>h-a,{returnNearestIfNoHit:!0}).index}function m(){i(ee)||E(ee,F(z())),E(V,F(u())),E(b,F(d()));let a=0;const n={},h=c()?O.querySelector("tbody").children:O.children;for(let y=0;y<h.length;(y+=1)-1){const _=h[y],L=getComputedStyle(_),M=L.position;if(M&&["absolute","fixed"].includes(M))continue;const C=L.display!=="none"?ue(_):0,R=i(V)+a;n[R]=(n[R]||0)+C,a+=1}for(const y of Object.keys(n)){const _=parseInt(y);i(X)[_]!==n[_]&&(i(X)[_]=n[_])}}function z(){const n=[],h=c()?O.querySelector("tbody").children:O.children;for(let y=0;y<h.length;(y+=1)-1){const _=h[y],L=getComputedStyle(_);if(["absolute","fixed"].includes(L.position))continue;const M=ue(_);if(n.push(M),n.length>=10)break}return n.length===0?0:n.reduce((y,_)=>y+_,0)/n.length}function G(a){const n=getComputedStyle(a);let h=parseFloat(l()?n.width:n.height);return n.boxSizing==="border-box"&&(l()?h-=parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth):h-=parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)),h}function ue(a){const n=getComputedStyle(a);let h=G(a);return l()?h+=parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth)+parseFloat(n.marginLeft)+parseFloat(n.marginRight):h+=parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth)+parseFloat(n.marginTop)+parseFloat(n.marginBottom),Number.isNaN(h)?0:h}function Se(a){return l()?a.scrollLeft:a.scrollTop}function ye(a){const n=getComputedStyle(a);return l()?parseFloat(n.paddingLeft):parseFloat(n.paddingTop)}function ie(a){if("scroll"in S){const n={behavior:g()};n[l()?"left":"top"]=a,S.scroll(n)}else S[l()?"scrollLeft":"scrollTop"]=a}var le=$e();be(le,a=>S=a,()=>S);const je=J(()=>Oe("vtlist",Q()));var ke=Te(le);$(ke,c,a=>{var n=Ge(),h=P(n);be(h,C=>O=C,()=>O);var y=Te(h);$(y,()=>e.header,C=>{var R=D(),p=P(R);k(p,()=>e.header),T(C,R)});var _=ae(y),L=Te(_);$(L,r,C=>{var R=D(),p=P(R);Ie(p,17,s,xe,(oe,me)=>{var Ee=D(),De=P(Ee);k(De,()=>e.vl_slot,()=>i(me)),T(oe,Ee)}),T(C,R)},C=>{var R=D(),p=P(R);Ie(p,17,()=>i(se),xe,(oe,me)=>{var Ee=D(),De=P(Ee);k(De,()=>e.vl_slot,()=>i(me)),T(oe,Ee)}),T(C,R)}),re(_),re(h);var M=ae(h,2);$(M,()=>e.footer,C=>{var R=D(),p=P(R);k(p,()=>e.footer),T(C,R)}),Ce(()=>Pe(h,"style",i(he))),T(a,n)},a=>{var n=pe();be(n,L=>O=L,()=>O);var h=Te(n);$(h,()=>e.header,L=>{var M=D(),C=P(M);k(C,()=>e.header),T(L,M)});var y=ae(h,2);$(y,r,L=>{var M=D(),C=P(M);Ie(C,17,s,xe,(R,p)=>{var oe=D(),me=P(oe);k(me,()=>e.vl_slot,()=>i(p)),T(R,oe)}),T(L,M)},L=>{var M=D(),C=P(M);Ie(C,17,()=>i(se),xe,(R,p)=>{var oe=D(),me=P(oe);k(me,()=>e.vl_slot,()=>i(p)),T(R,oe)}),T(L,M)});var _=ae(y,2);$(_,()=>e.footer,L=>{var M=D(),C=P(M);k(C,()=>e.footer),T(L,M)}),re(n),Ce(()=>Pe(n,"style",i(he))),T(a,n)}),re(le),Ce(()=>{Ke(le,i(je)),Pe(le,"style",i(ne))}),Re(le,"clientHeight",a=>E(x,a)),Re(le,"clientWidth",a=>E(fe,a)),T(o,le),Ue()}class et{constructor(e,t,s){j(this,"model");j(this,"sizeCalculatorFn");j(this,"averageSize");j(this,"itemSizeAndPositionData",{});j(this,"lastMeasuredIndex",-1);j(this,"totalSize");this.model=e,this.sizeCalculatorFn=t,this.averageSize=s,this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.sizeCalculatorFn=="function"}mutateState(e,t,s){t&&this.model.length!==t.length&&(this.model=t),s!==void 0&&(this.averageSize=s),e!==void 0&&(this.sizeCalculatorFn=e),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}getSize(e){var t;return((t=this.sizeCalculatorFn)==null?void 0:t.call(this,this.model[e],e))||this.averageSize}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.model.length;t++){let s=this.getSize(t);s||(console.log("item size is undefined"),s=0),this.itemSizeAndPositionData[t]={offset:e,size:s},e+=s}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.model.length)throw Error(`Requested index ${e} is outside of range 0..${this.model.length}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let s=t.offset+t.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const l=this.getSize(r);if(l===void 0||isNaN(l))throw Error(`Invalid size returned for index ${r} of value ${l}`);this.itemSizeAndPositionData[r]={offset:s,size:l},s+=l}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.averageSize||typeof this.sizeCalculatorFn=="number"&&this.sizeCalculatorFn||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.model.length-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=Ae.START,t,s,r){if(t<=0)return 0;const l=this.getSizeAndPositionForIndex(r),c=l.offset,v=c-t+l.size;let g;switch(e){case Ae.END:g=v;break;case Ae.CENTER:g=c-(t-l.size)/2;break;case Ae.START:g=c;break;default:g=Math.max(v,Math.min(c,s))}const Q=this.getTotalSize();return Math.max(0,Math.min(Q-t,g))}getVisibleRangeIndex(e=0,t,s){if(this.getTotalSize()===0)return{start:0,end:0};const l=t+e;let c=this.findNearestItem(t);if(c===void 0)throw Error(`Invalid offset ${t} specified`);const v=this.getSizeAndPositionForIndex(c);t=v.offset+v.size;let g=c;for(;t<l&&g<this.model.length-1;)g++,t+=this.getSizeAndPositionForIndex(g).size;return s&&(c=Math.max(0,c-s),g=Math.min(g+s,this.model.length-1)),{start:c,end:g}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),s=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,s,e):this.exponentialSearch(s,e)}binarySearch(e,t,s){let r=0,l=0;for(;e<=t;){if(r=e+Math.floor((t-e)/2),l=this.getSizeAndPositionForIndex(r).offset,l===s)return r;l<s?e=r+1:l>s&&(t=r-1)}return e>0?e-1:0}exponentialSearch(e,t){let s=1;for(;e<this.model.length&&this.getSizeAndPositionForIndex(e).offset<t;)e+=s,s*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.model.length-1),t)}}const tt=(()=>{let o=!1;try{const e=Object.defineProperty({},"passive",{get(){return o={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return o})();var it=Me('<div><!> <div class="virtual-list-inner"></div> <!></div>');function rt(o,e){we(e,!0);const t=I(e,"model",19,()=>[]),s=I(e,"windowOverPaddingCount",3,3),r=I(e,"isHorizontal",3,!1),l=I(e,"scrollToAlignment",19,()=>Ae.AUTO),c=I(e,"scrollToBehaviour",19,()=>He.INSTANT),v=I(e,"class",3,""),g=I(e,"style",3,""),Q=Be(e,["$$slots","$$events","$$legacy","model","sizeCalculator","estimatedItemSize","getKey","scrollToIndex","scrollToOffset","windowOverPaddingCount","isHorizontal","scrollToAlignment","scrollToBehaviour","footer","slot","header","onVisibleRangeUpdate","onAfterScroll","class","style"]),U=new et(t(),e.sizeCalculator,e.estimatedItemSize);let B=W(0),S=W(0),O=!1,x,fe=W(F([])),A=W(F({offset:e.scrollToOffset||e.scrollToIndex!==void 0&&w(e.scrollToIndex)||0,scrollChangeReason:ve.REQUESTED})),V={},b={scrollToIndex:e.scrollToIndex,scrollToAlignment:l(),scrollToOffset:e.scrollToOffset,sizeCalculator:e.sizeCalculator,estimatedItemSize:e.estimatedItemSize};const ee=J(()=>Oe("overflow:auto;",g())),Y=J(()=>{const f=i(A).offset,u=f+(r()?i(S):i(B));return Oe("display:flex;",!r()&&"flex-direction:column;"||"flex-direction:row;",!r()&&`margin-top:${f}px;margin-bottom:${u}px`||`margin-left:${f}px;margin-right:${u}px;width:${U.getTotalSize()-u-f}px`)});de(()=>{e.scrollToIndex,l(),e.scrollToOffset,e.sizeCalculator,e.estimatedItemSize,N()}),de(()=>{const{offset:f,scrollChangeReason:u}=i(A);(V.offset!==f||V.scrollChangeReason!==u)&&te(),V.offset!==f&&u===ve.REQUESTED&&X(f),V=i(A)}),de(()=>{i(B),i(S),O&&q(0)}),_e(()=>{x.addEventListener("scroll",se,tt),e.scrollToOffset!==void 0?X(e.scrollToOffset):e.scrollToIndex!==void 0&&X(w(e.scrollToIndex)),te(),O=!0}),Fe(()=>{O&&x.removeEventListener("scroll",se)});function N(){if(!O)return;e.scrollToIndex&&e.scrollToOffset&&console.log("VirtualList: scrollToIndex and scrollToOffset MUST NOT be used together.");const f=b.scrollToIndex!==e.scrollToIndex||b.scrollToAlignment!==l(),u=b.sizeCalculator!==e.sizeCalculator||b.estimatedItemSize!==e.estimatedItemSize;u&&(U.mutateState(e.sizeCalculator,t(),e.estimatedItemSize),q()),b.scrollToOffset!==e.scrollToOffset?E(A,F({offset:e.scrollToOffset||0,scrollChangeReason:ve.REQUESTED})):typeof e.scrollToIndex=="number"&&(f||u)&&E(A,F({offset:w(e.scrollToIndex,l()),scrollChangeReason:ve.REQUESTED})),b={scrollToIndex:e.scrollToIndex,scrollToAlignment:l(),scrollToOffset:e.scrollToOffset,sizeCalculator:e.sizeCalculator,estimatedItemSize:e.estimatedItemSize}}function te(){const{offset:f}=i(A);let{start:u,end:d}=U.getVisibleRangeIndex(r()?i(S):i(B),f,s()),m=[];if(u!==void 0&&d!==void 0){for(let z=u;z<=d;(z+=1)-1)m.push({item:t()[z],index:z});if(e.onVisibleRangeUpdate){const z=U.getVisibleRangeIndex(r()?i(S):i(B),f,0);e.onVisibleRangeUpdate({type:"range.update",start:z.start,end:z.end})}}E(fe,F(m))}function X(f){if("scroll"in x){const u={behavior:c()};u[r()?"left":"top"]=f,x.scroll(u)}else x[r()?"scrollLeft":"scrollTop"]=f}function q(f=0){U.resetItem(f),te()}function w(f,u=l()){return f<0?f=0:f>=t().length&&(f=t().length-1),U.getUpdatedOffsetForIndex(u,r()?i(S):i(B),i(A).offset||0,f)}const se=f=>{const u=r()?x.scrollLeft:x.scrollTop;u<0||i(A).offset===u||f.target!==x||(E(A,F({offset:u,scrollChangeReason:ve.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:u,event:f}))};var H=it();be(H,f=>x=f,()=>x);let ce;var Z=Te(H);$(Z,()=>e.header,f=>{var u=D(),d=P(u);k(d,()=>e.header),T(f,u)});var ne=ae(Z,2);Ie(ne,21,()=>i(fe),xe,(f,u)=>{var d=D(),m=P(d),z=Qe(()=>({index:e.getKey?e.getKey(i(u).index):i(u).index,item:i(u).item,size:U.itemSizeAndPositionData[i(u).index].size}));k(m,()=>e.slot,()=>i(z)),T(f,d)}),re(ne);var he=ae(ne,2);return $(he,()=>e.footer,f=>{var u=D(),d=P(u);k(d,()=>e.footer),T(f,u)}),re(H),Ce(()=>{ce=Le(H,ce,{class:`virtual-list-wrapper $${v()??""}`,style:i(ee),...Q}),Pe(ne,"style",i(Y))}),Re(H,"clientHeight",f=>E(B,f)),Re(H,"clientWidth",f=>E(S,f)),T(o,H),Ue({recomputeSizes:q})}var He=(o=>(o.AUTO="auto",o.SMOOTH="smooth",o.INSTANT="instant",o))(He||{}),Ae=(o=>(o.AUTO="auto",o.START="start",o.CENTER="center",o.END="end",o))(Ae||{}),ve=(o=>(o[o.OBSERVED=0]="OBSERVED",o[o.REQUESTED=1]="REQUESTED",o))(ve||{});export{ge as A,K as D,Ve as S,at as V,lt as a,Ae as b,He as c,rt as d};
