var Ge=Object.defineProperty;var pe=(l,e,t)=>e in l?Ge(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var j=(l,e,t)=>pe(l,typeof e!="symbol"?e+"":e,t);import{p as Fe,a as E,s as H,b as _,u as me,o as Ue,c as Ve,g as i,d as O,e as be,i as te,f as Ie,t as Pe,h as y,j as Le,k as Ce,l as ce,m as Te,n as xe,r as he,q as $e,v as Ee,w as et,x as w,y as D,z as W,A as We,B as Re,C as Z,D as He,E as Me}from"./external.bflEojmh.js";let tt=class{constructor(e,t,o,d){j(this,"model");j(this,"modelCount");j(this,"itemSize");j(this,"estimatedItemSize");j(this,"itemSizeAndPositionData");j(this,"lastMeasuredIndex");j(this,"totalSize");this.model=e,this.itemSize=o,this.modelCount=t,this.estimatedItemSize=d,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,t,o){t!==void 0&&(this.modelCount=t),o!==void 0&&(this.estimatedItemSize=o),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?t(this.model[e],e):Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.modelCount;t++){const o=this.getSize(t);this.itemSizeAndPositionData[t]={offset:e,size:o},e+=o}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.modelCount)throw Error(`Requested index ${e} is outside of range 0..${this.modelCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let o=t.offset+t.size;for(let d=this.lastMeasuredIndex+1;d<=e;d++){const a=this.getSize(d);if(a===void 0||isNaN(a))throw Error(`Invalid size returned for index ${d} of value ${a}`);this.itemSizeAndPositionData[d]={offset:o,size:a},o+=a}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=ie.START,t,o,d){if(t<=0)return 0;const a=this.getSizeAndPositionForIndex(d),h=a.offset,M=h-t+a.size;let m;switch(e){case ie.END:m=M;break;case ie.CENTER:m=h-(t-a.size)/2;break;case ie.START:m=h;break;default:m=Math.max(M,Math.min(h,o))}const F=this.getTotalSize();return Math.max(0,Math.min(F-t,m))}getVisibleRange(e=0,t,o){if(this.getTotalSize()===0)return{start:0,end:0};const a=t+e;let h=this.findNearestItem(t);if(h===void 0)throw Error(`Invalid offset ${t} specified`);const M=this.getSizeAndPositionForIndex(h);t=M.offset+M.size;let m=h;for(;t<a&&m<this.modelCount-1;)m++,t+=this.getSizeAndPositionForIndex(m).size;return o&&(h=Math.max(0,h-o),m=Math.min(m+o,this.modelCount-1)),{start:h,end:m}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),o=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,o,e):this.exponentialSearch(o,e)}binarySearch(e,t,o){let d=0,a=0;for(;e<=t;){if(d=e+Math.floor((t-e)/2),a=this.getSizeAndPositionForIndex(d).offset,a===o)return d;a<o?e=d+1:a>o&&(t=d-1)}return e>0?e-1:0}exponentialSearch(e,t){let o=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=o,o*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),t)}};const it=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();var nt=Ce('<div><!> <div class="virtual-list-inner svelte-f32i87"></div> <!></div>');function mt(l,e){Fe(e,!0);const t=E(e,"width",3,"100%"),o=E(e,"model",19,()=>[]),d=E(e,"windowOverPadding",3,3),a=E(e,"scrollDirection",19,()=>J.VERTICAL),h=E(e,"scrollToAlignment",19,()=>ie.AUTO),M=E(e,"scrollToBehaviour",19,()=>Ne.INSTANT),m=E(e,"class",3,"");E(e,"style",3,"");const F=et(e,["$$slots","$$events","$$legacy","height","width","model","modelCount","itemSize","estimatedItemSize","getKey","scrollToIndex","scrollOffset","windowOverPadding","scrollDirection","scrollToAlignment","scrollToBehaviour","footer","slot","header","onVisibleRangeUpdate","onAfterScroll","class","style"]),ne={[J.VERTICAL]:"top",[J.HORIZONTAL]:"left"},G={[J.VERTICAL]:"scrollTop",[J.HORIZONTAL]:"scrollLeft"},L=new tt(o(),e.modelCount,e.itemSize,e.estimatedItemSize);let v=!1,P,N=H(_([])),U=H(_({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&x(e.scrollToIndex)||0,scrollChangeReason:ze.REQUESTED})),Q={},k={scrollToIndex:e.scrollToIndex,scrollToAlignment:h(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},se={},le=H(""),q=H("");me(()=>{e.scrollToIndex,h(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,V()}),me(()=>{const{offset:f,scrollChangeReason:S}=i(U);(Q.offset!==f||Q.scrollChangeReason!==S)&&Y(),Q.offset!==f&&S===ze.REQUESTED&&p(f),Q=i(U)}),me(()=>{e.height,t(),v&&B(0)}),(()=>{if(a()===J.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical'");if(a()===J.HORIZONTAL&&typeof t()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal'");Y()})(),Ue(()=>{P.addEventListener("scroll",de,it),e.scrollOffset!==void 0?p(e.scrollOffset):e.scrollToIndex!==void 0&&p(x(e.scrollToIndex)),v=!0}),Ve(()=>{v&&P.removeEventListener("scroll",de)});function V(){if(!v)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset MUST NOT be used together.");const f=k.scrollToIndex!==e.scrollToIndex||k.scrollToAlignment!==h(),S=k.modelCount!==e.modelCount||k.itemSize!==e.itemSize||k.estimatedItemSize!==e.estimatedItemSize;S&&(L.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),B()),k.scrollOffset!==e.scrollOffset?O(U,_({offset:e.scrollOffset||0,scrollChangeReason:ze.REQUESTED})):typeof e.scrollToIndex=="number"&&(f||S)&&O(U,_({offset:x(e.scrollToIndex,h(),e.modelCount),scrollChangeReason:ze.REQUESTED})),k={scrollToIndex:e.scrollToIndex,scrollToAlignment:h(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function Y(){const{offset:f}=i(U);let{start:S,end:R}=L.getVisibleRange(a()===J.VERTICAL?e.height:t(),f,d()),ae=[];const ge=L.getTotalSize(),Se=typeof e.height=="number"?"px":"",Oe=typeof t()=="number"?"px":"";if(a()===J.VERTICAL?(O(le,`height:${e.height}${Se};width:${t()}${Oe};`),O(q,`flex-direction:column;height:${ge}px;`)):(O(le,`height:${e.height}${Se};width:${t()}${Oe};`),O(q,`min-height:100%;width:${ge}px;`)),S!==void 0&&R!==void 0){for(let $=S;$<=R;($+=1)-1)ae.push({item:o()[$],index:$,style:oe($)});if(e.onVisibleRangeUpdate){const $=L.getVisibleRange(a()===J.VERTICAL?e.height:t(),f,0);e.onVisibleRangeUpdate({type:"range.update",start:$.start,end:$.end})}}O(N,_(ae))}function p(f){"scroll"in P?P.scroll({[ne[a()]]:f,behavior:M()}):P[G[a()]]=f}function B(f=0){se={},L.resetItem(f),Y()}function x(f,S=h(),R=e.modelCount){return f<0?f=0:f>=R&&(f=R-1),L.getUpdatedOffsetForIndex(S,a()===J.VERTICAL?e.height:t(),i(U).offset||0,f)}const de=f=>{const S=P[G[a()]];S<0||i(U).offset===S||f.target!==P||(O(U,_({offset:S,scrollChangeReason:ze.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:S,event:f}))};function oe(f){if(se[f])return se[f];const{size:S,offset:R}=L.getSizeAndPositionForIndex(f);let ae;return a()===J.VERTICAL?ae=`left:0;width:100%;height:${S}px;position:absolute;top:${R}px;`:ae=`top:0;width:${S}px;position:absolute;height:100%;left:${R}px;`,se[f]=ae}var X=nt();be(X,f=>P=f,()=>P);let c;var u=Te(X);te(u,()=>e.header,f=>{var S=w(),R=D(S);W(R,()=>e.header),y(f,S)});var b=ce(u,2);Ie(b,21,()=>i(N),xe,(f,S)=>{var R=w(),ae=D(R),ge=We(()=>({item:i(S).item,style:i(S).style,index:e.getKey?e.getKey(i(S).index):i(S).index}));W(ae,()=>e.slot,()=>i(ge)),y(f,R)}),he(b);var K=ce(b,2);return te(K,()=>e.footer,f=>{var S=w(),R=D(S);W(R,()=>e.footer),y(f,S)}),he(X),Pe(()=>{c=$e(X,c,{class:`virtual-list-wrapper $${m()??""}`,style:i(le),...F},"svelte-f32i87"),Ee(b,"style",i(q))}),y(l,X),Le({recomputeSizes:B})}var Ne=(l=>(l.AUTO="auto",l.SMOOTH="smooth",l.INSTANT="instant",l))(Ne||{}),ie=(l=>(l.AUTO="auto",l.START="start",l.CENTER="center",l.END="end",l))(ie||{}),J=(l=>(l.HORIZONTAL="horizontal",l.VERTICAL="vertical",l))(J||{}),ze=(l=>(l[l.OBSERVED=0]="OBSERVED",l[l.REQUESTED=1]="REQUESTED",l))(ze||{});const st=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();var ot=Ce('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),at=Ce('<div class="vtlist-inner"><!> <!> <!></div>'),lt=Ce("<div><!></div>");function gt(l,e){Fe(e,!0);var t;(function(s){s[s.OBSERVED=0]="OBSERVED",s[s.REQUESTED=1]="REQUESTED"})(t||(t={}));const o=E(e,"items",19,()=>[]),d=E(e,"isDisabled",3,!1),a=E(e,"isHorizontal",3,!1),h=E(e,"isTable",3,!1),M=E(e,"preRenderCount",3,6),m=E(e,"scrollToAlignment",19,()=>ie.AUTO),F=E(e,"scrollToBehaviour",19,()=>Ne.INSTANT),ne=E(e,"class",3,""),G=E(e,"style",3,"");let L=!1,v,P,N=H(0),U=H(0),Q=100,k=H(0),se=H(M()-1),le=H(0),q=H(_({offset:e.scrollToOffset||e.scrollToIndex!==void 0&&o().length&&R(e.scrollToIndex)&&1||0,scrollChangeReason:t.REQUESTED})),V;const Y=Z(()=>{var n;const s=(((n=o())==null?void 0:n.length)||1)-1;return i(se)<s?i(se):s}),p=Z(()=>new Array(o().length)),B=Z(()=>o().map((s,n)=>{var g;let r=(g=e.sizingCalculator)==null?void 0:g.call(e,n,s);return r!==void 0||(r=i(p)[n],r!==void 0)?r:i(le)})),x=Z(()=>{const s=[];return i(B).reduce((n,r)=>(s.push(n),n+r),0),s}),de=Z(()=>{if(!o()||d())return[];const s=[];for(let n=i(k);n<=i(Y);(n+=1)-1){const r=o()[n];r&&s.push({item:r,index:n,size:i(B)[n]})}return s}),oe=Z(()=>i(x)[i(k)]?i(x)[i(k)]:0),X=Z(()=>i(x).length>0?i(x)[i(x).length-1]+i(B)[i(B).length-1]:0),c=Z(()=>i(x)[i(Y)]?i(X)-i(x)[i(Y)]-i(B)[i(Y)]:0),u=Z(()=>Me(!d()&&"overflow:auto;",G())),b=Z(()=>Me(!h()&&"display:flex;",!h()&&(!a()&&"flex-direction:column;"||"flex-direction:row;"),!d()&&(!a()&&`margin-top:${i(oe)}px;margin-bottom:${i(c)}px`||`margin-left:${i(oe)}px;margin-right:${i(c)}px;width:${i(X)-i(c)-i(oe)}px`)));Ue(()=>{v.addEventListener("scroll",K,st),ke(),e.scrollToOffset!==void 0?we(e.scrollToOffset):e.scrollToIndex!==void 0&&we(R(e.scrollToIndex)),L=!0}),Ve(()=>{L&&v.removeEventListener("scroll",K)}),me(()=>{var r;const{offset:s,scrollChangeReason:n}=i(q);if((V==null?void 0:V.offset)!==s||(V==null?void 0:V.scrollChangeReason)!==n){ke();const g=Ze(a()?i(U):i(N),s);(r=e.onVisibleRangeUpdate)==null||r.call(e,{type:"range.update",start:g.start,end:g.end})}(V==null?void 0:V.offset)!==s&&n===t.REQUESTED&&we(s),V=i(q)});function K(s){var r;const n=De(v);s.target!==v||n<0||i(q).offset===n||(O(q,_({offset:n,scrollChangeReason:t.OBSERVED})),(r=e.onAfterScroll)==null||r.call(e,{type:"scroll.update",offset:n,event:s}))}function f(){const s=De(v)-je(v)-Q;return Se(s)}function S(){const s=De(v)-je(v)+Be(v)+Q;return Se(s)}function R(s,n=m(),r=o().length){return s<0?s=0:s>=r&&(s=r-1),ae(n,scrollDirection===DIRECTION.VERTICAL?height:width,i(q).offset||0,s)}function ae(s=ie.START,n,r,g){if(n<=0)return 0;const z=i(B)[g],A=i(x)[g],I=A-n+z;let T;switch(s){case ie.END:T=I;break;case ie.CENTER:T=A-(n-z)/2;break;case ie.START:T=A;break;default:T=Math.max(I,Math.min(A,r))}const C=i(X);return Math.max(0,Math.min(C-n,T))}let ge=-1;function Se(s){if(isNaN(s))throw Error(`Invalid offset ${s} specified`);s=Math.max(0,s);const n=Oe(),r=Math.max(0,ge);return n.offset>=s?$(0,r,s):Ke(r,s)}function Oe(){return{offset:0,size:0}}function $(s,n,r){let g=0,z=0;for(;s<=n;){if(g=s+Math.floor((n-s)/2),z=i(x)[g],z===r)return g;z<r?s=g+1:z>r&&(n=g-1)}return s>0?s-1:0}function Ke(s,n){let r=1;for(;s<o().length&&i(x)[s]<n;)s+=r,r*=2;return $(Math.floor(s/2),Math.min(s,o().length-1),n)}function ke(){i(le)||O(le,_(Je())),O(k,_(f())),O(se,_(S()));let s=0;const n={},r=h()?P.querySelector("tbody").children:P.children;for(let g=0;g<r.length;(g+=1)-1){const z=r[g],A=getComputedStyle(z),I=A.position;if(I&&["absolute","fixed"].includes(I))continue;const T=A.display!=="none"?Qe(z):0,C=i(k)+s;n[C]=(n[C]||0)+T,s+=1}for(const g of Object.keys(n)){const z=parseInt(g);i(p)[z]!==n[z]&&(i(p)[z]=n[z])}}function Je(){const n=[],r=h()?P.querySelector("tbody").children:P.children;for(let g=0;g<r.length;(g+=1)-1){const z=r[g],A=getComputedStyle(z);if(["absolute","fixed"].includes(A.position))continue;const I=Qe(z);if(n.push(I),n.length>=10)break}return n.length===0?0:n.reduce((g,z)=>g+z,0)/n.length}function Be(s){const n=getComputedStyle(s);let r=parseFloat(a()?n.width:n.height);return n.boxSizing==="border-box"&&(a()?r-=parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth):r-=parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)),r}function Ze(s=0,n){if(i(X)===0)return{start:0,end:0};const g=n+s;let z=Se(n);if(z===void 0)throw Error(`Invalid offset ${n} specified`);let A=i(x)[z]+i(B)[z],I=z;for(;A<g&&I<o().length-1;)I+=1,A+=i(B)[I];return{start:z,end:I}}function Qe(s){const n=getComputedStyle(s);let r=Be(s);return a()?r+=parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth)+parseFloat(n.marginLeft)+parseFloat(n.marginRight):r+=parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth)+parseFloat(n.marginTop)+parseFloat(n.marginBottom),Number.isNaN(r)?0:r}function De(s){return a()?s.scrollLeft:s.scrollTop}function je(s){const n=getComputedStyle(s);return a()?parseFloat(n.paddingLeft):parseFloat(n.paddingTop)}function we(s){if("scroll"in v){const n={behavior:F()};n[a()?"left":"top"]=s,v.scroll(n)}else v[a()?"scrollLeft":"scrollTop"]=s}var fe=lt();be(fe,s=>v=s,()=>v);const Ye=Z(()=>Me("vtlist",ne()));var Xe=Te(fe);te(Xe,h,s=>{var n=ot(),r=D(n);be(r,T=>P=T,()=>P);var g=Te(r);te(g,()=>e.header,T=>{var C=w(),ee=D(C);W(ee,()=>e.header),y(T,C)});var z=ce(g),A=Te(z);te(A,d,T=>{var C=w(),ee=D(C);Ie(ee,17,o,xe,(re,ue)=>{var ye=w(),_e=D(ye);W(_e,()=>e.vl_slot,()=>i(ue)),y(re,ye)}),y(T,C)},T=>{var C=w(),ee=D(C);Ie(ee,17,()=>i(de),xe,(re,ue)=>{var ye=w(),_e=D(ye);W(_e,()=>e.vl_slot,()=>i(ue)),y(re,ye)}),y(T,C)}),he(z),he(r);var I=ce(r,2);te(I,()=>e.footer,T=>{var C=w(),ee=D(C);W(ee,()=>e.footer),y(T,C)}),Pe(()=>Ee(r,"style",i(b))),y(s,n)},s=>{var n=at();be(n,A=>P=A,()=>P);var r=Te(n);te(r,()=>e.header,A=>{var I=w(),T=D(I);W(T,()=>e.header),y(A,I)});var g=ce(r,2);te(g,d,A=>{var I=w(),T=D(I);Ie(T,17,o,xe,(C,ee)=>{var re=w(),ue=D(re);W(ue,()=>e.vl_slot,()=>i(ee)),y(C,re)}),y(A,I)},A=>{var I=w(),T=D(I);Ie(T,17,()=>i(de),xe,(C,ee)=>{var re=w(),ue=D(re);W(ue,()=>e.vl_slot,()=>i(ee)),y(C,re)}),y(A,I)});var z=ce(g,2);te(z,()=>e.footer,A=>{var I=w(),T=D(I);W(T,()=>e.footer),y(A,I)}),he(n),Pe(()=>Ee(n,"style",i(b))),y(s,n)}),he(fe),Pe(()=>{He(fe,i(Ye)),Ee(fe,"style",i(u))}),Re(fe,"clientHeight",s=>O(N,s)),Re(fe,"clientWidth",s=>O(U,s)),y(l,fe),Le()}class rt{constructor(e,t,o){j(this,"model");j(this,"sizeCalculatorFn");j(this,"averageSize");j(this,"itemSizeAndPositionData",{});j(this,"lastMeasuredIndex",-1);j(this,"totalSize");this.model=e,this.sizeCalculatorFn=t,this.averageSize=o,this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.sizeCalculatorFn=="function"}mutateState(e,t,o){t&&this.model.length!==t.length&&(this.model=t),o!==void 0&&(this.averageSize=o),e!==void 0&&(this.sizeCalculatorFn=e),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}getSize(e){var t;return((t=this.sizeCalculatorFn)==null?void 0:t.call(this,this.model[e],e))||this.averageSize}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.model.length;t++){let o=this.getSize(t);o||(o=0),this.itemSizeAndPositionData[t]={offset:e,size:o},e+=o}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.model.length)throw Error(`Requested index ${e} is outside of range 0..${this.model.length}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let o=t.offset+t.size;for(let d=this.lastMeasuredIndex+1;d<=e;d++){const a=this.getSize(d);if(a===void 0||isNaN(a))throw Error(`Invalid size returned for index ${d} of value ${a}`);this.itemSizeAndPositionData[d]={offset:o,size:a},o+=a}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.averageSize||typeof this.sizeCalculatorFn=="number"&&this.sizeCalculatorFn||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.model.length-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=Ae.START,t,o,d){if(t<=0)return 0;const a=this.getSizeAndPositionForIndex(d),h=a.offset,M=h-t+a.size;let m;switch(e){case Ae.END:m=M;break;case Ae.CENTER:m=h-(t-a.size)/2;break;case Ae.START:m=h;break;default:m=Math.max(M,Math.min(h,o))}const F=this.getTotalSize();return Math.max(0,Math.min(F-t,m))}getVisibleRangeOffsets(e=0,t){if(this.getTotalSize()===0)return{start:0,end:0};const d=t+e,a=t;let h=this.findNearestItem(t);if(h===void 0)throw Error(`Invalid offset ${t} specified`);const M=this.getSizeAndPositionForIndex(h);t=M.offset+M.size;let m=h;for(;t<d&&m<this.model.length-1;)m++,t+=this.getSizeAndPositionForIndex(m).size;return{startOffset:a,endOffset:t}}getVisibleRangeIndex(e=0,t,o){if(this.getTotalSize()===0)return{start:0,end:0};const a=t+e;let h=this.findNearestItem(t);if(h===void 0)throw Error(`Invalid offset ${t} specified`);const M=this.getSizeAndPositionForIndex(h);t=M.offset+M.size;let m=h;for(;t<a&&m<this.model.length-1;)m++,t+=this.getSizeAndPositionForIndex(m).size;return o&&(h=Math.max(0,h-o),m=Math.min(m+o,this.model.length-1)),{start:h,end:m}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),o=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,o,e):this.exponentialSearch(o,e)}binarySearch(e,t,o){let d=0,a=0;for(;e<=t;){if(d=e+Math.floor((t-e)/2),a=this.getSizeAndPositionForIndex(d).offset,a===o)return d;a<o?e=d+1:a>o&&(t=d-1)}return e>0?e-1:0}exponentialSearch(e,t){let o=1;for(;e<this.model.length&&this.getSizeAndPositionForIndex(e).offset<t;)e+=o,o*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.model.length-1),t)}}const dt=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();var ft=Ce('<div><!> <div class="vtlist-inner"></div> <!></div>');function St(l,e){Fe(e,!0);const t=E(e,"model",19,()=>[]),o=E(e,"windowOverPaddingCount",3,3),d=E(e,"isHorizontal",3,!1),a=E(e,"scrollToAlignment",19,()=>Ae.AUTO),h=E(e,"scrollToBehaviour",19,()=>qe.INSTANT),M=E(e,"class",3,""),m=E(e,"style",3,""),F=new rt(t(),e.sizeCalculator,e.estimatedItemSize);let ne=H(0),G=H(0),L=!1,v,P=H(_([])),N=H(_({offset:e.scrollToOffset||e.scrollToIndex!==void 0&&p(e.scrollToIndex)||0,scrollChangeReason:ve.REQUESTED})),U={},Q={scrollToIndex:e.scrollToIndex,scrollToAlignment:a(),scrollToOffset:e.scrollToOffset,sizeCalculator:e.sizeCalculator,estimatedItemSize:e.estimatedItemSize};const k=Z(()=>Me("overflow:auto;",m())),se=Z(()=>{const{offset:c}=i(N),u=F.getVisibleRangeOffsets(d()?i(G):i(ne),c),b=u.startOffset,K=u.endOffset;return Me("display:flex;",!d()&&"flex-direction:column;"||"flex-direction:row;",!d()&&`margin-top:${b}px;margin-bottom:${K}px`||`margin-left:${b}px;margin-right:${K}px;width:${F.getTotalSize()-K-b}px`)});me(()=>{e.scrollToIndex,a(),e.scrollToOffset,e.sizeCalculator,e.estimatedItemSize,le()}),me(()=>{const{offset:c,scrollChangeReason:u}=i(N);(U.offset!==c||U.scrollChangeReason!==u)&&q(),U.offset!==c&&u===ve.REQUESTED&&V(c),U=i(N)}),me(()=>{i(ne),i(G),L&&Y(0)}),Ue(()=>{v.addEventListener("scroll",B,dt),e.scrollToOffset!==void 0?V(e.scrollToOffset):e.scrollToIndex!==void 0&&V(p(e.scrollToIndex)),q(),L=!0}),Ve(()=>{L&&v.removeEventListener("scroll",B)});function le(){if(!L)return;e.scrollToIndex&&e.scrollToOffset&&console.log("VirtualList: scrollToIndex and scrollToOffset MUST NOT be used together.");const c=Q.scrollToIndex!==e.scrollToIndex||Q.scrollToAlignment!==a(),u=Q.sizeCalculator!==e.sizeCalculator||Q.estimatedItemSize!==e.estimatedItemSize;u&&(F.mutateState(e.sizeCalculator,t(),e.estimatedItemSize),Y()),Q.scrollToOffset!==e.scrollToOffset?O(N,_({offset:e.scrollToOffset||0,scrollChangeReason:ve.REQUESTED})):typeof e.scrollToIndex=="number"&&(c||u)&&O(N,_({offset:p(e.scrollToIndex,a()),scrollChangeReason:ve.REQUESTED})),Q={scrollToIndex:e.scrollToIndex,scrollToAlignment:a(),scrollToOffset:e.scrollToOffset,sizeCalculator:e.sizeCalculator,estimatedItemSize:e.estimatedItemSize}}function q(){const{offset:c}=i(N);let{start:u,end:b}=F.getVisibleRangeIndex(d()?i(G):i(ne),c,o()),K=[];if(u!==void 0&&b!==void 0){for(let f=u;f<=b;(f+=1)-1)K.push({item:t()[f],index:f});if(e.onVisibleRangeUpdate){const f=F.getVisibleRangeIndex(d()?i(G):i(ne),c,0);e.onVisibleRangeUpdate({type:"range.update",start:f.start,end:f.end})}}O(P,_(K))}function V(c){if("scroll"in v){const u={behavior:h()};u[d()?"left":"top"]=c,v.scroll(u)}else v[d()?"scrollLeft":"scrollTop"]=c}function Y(c=0){F.resetItem(c),q()}function p(c,u=a()){return c<0?c=0:c>=t().length&&(c=t().length-1),F.getUpdatedOffsetForIndex(u,d()?i(G):i(ne),i(N).offset||0,c)}const B=c=>{const u=d()?v.scrollLeft:v.scrollTop;u<0||i(N).offset===u||c.target!==v||(O(N,_({offset:u,scrollChangeReason:ve.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:u,event:c}))};var x=ft();be(x,c=>v=c,()=>v);var de=Te(x);te(de,()=>e.header,c=>{var u=w(),b=D(u);W(b,()=>e.header),y(c,u)});var oe=ce(de,2);Ie(oe,21,()=>i(P),xe,(c,u)=>{var b=w(),K=D(b),f=We(()=>({index:e.getKey?e.getKey(i(u).index):i(u).index,item:i(u).item,size:F.itemSizeAndPositionData[i(u).index].size}));W(K,()=>e.vl_slot,()=>i(f)),y(c,b)}),he(oe);var X=ce(oe,2);return te(X,()=>e.footer,c=>{var u=w(),b=D(u);W(b,()=>e.footer),y(c,u)}),he(x),Pe(()=>{He(x,`vtlist $${M()??""}`),Ee(x,"style",i(k)),Ee(oe,"style",i(se))}),Re(x,"clientHeight",c=>O(ne,c)),Re(x,"clientWidth",c=>O(G,c)),y(l,x),Le({recomputeSizes:Y})}var qe=(l=>(l.AUTO="auto",l.SMOOTH="smooth",l.INSTANT="instant",l))(qe||{}),Ae=(l=>(l.AUTO="auto",l.START="start",l.CENTER="center",l.END="end",l))(Ae||{}),ve=(l=>(l[l.OBSERVED=0]="OBSERVED",l[l.REQUESTED=1]="REQUESTED",l))(ve||{});export{ie as A,J as D,Ne as S,gt as V,mt as a,Ae as b,qe as c,St as d};
