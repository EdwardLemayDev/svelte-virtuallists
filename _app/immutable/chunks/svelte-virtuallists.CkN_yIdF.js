var Ne=Object.defineProperty;var Be=(r,e,i)=>e in r?Ne(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var $=(r,e,i)=>Be(r,typeof e!="symbol"?e+"":e,i);import{p as Me,a as y,s as Q,b as W,u as ze,o as De,c as Fe,g as n,d as R,e as be,i as J,f as ge,t as ye,h as S,j as Ve,k as Ee,l as fe,m as ve,n as Se,r as ce,q as We,v as Ae,w as ke,x as C,y as E,z as B,A as He,B as Pe,C as N,D as Qe,E as Re}from"./external.CceTcWGp.js";class je{constructor(e,i,o,c){$(this,"model");$(this,"modelCount");$(this,"itemSize");$(this,"estimatedItemSize");$(this,"itemSizeAndPositionData");$(this,"lastMeasuredIndex");$(this,"totalSize");this.model=e,this.itemSize=o,this.modelCount=i,this.estimatedItemSize=c,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,i,o){i!==void 0&&(this.modelCount=i),o!==void 0&&(this.estimatedItemSize=o),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:i}=this;return typeof i=="function"?i(this.model[e],e):Array.isArray(i)?i[e]:i}computeTotalSizeAndPositionData(){let e=0;for(let i=0;i<this.modelCount;i++){const o=this.getSize(i);this.itemSizeAndPositionData[i]={offset:e,size:o},e+=o}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.modelCount)throw Error(`Requested index ${e} is outside of range 0..${this.modelCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const i=this.getSizeAndPositionOfLastMeasuredItem();let o=i.offset+i.size;for(let c=this.lastMeasuredIndex+1;c<=e;c++){const a=this.getSize(c);if(a===void 0||isNaN(a))throw Error(`Invalid size returned for index ${c} of value ${a}`);this.itemSizeAndPositionData[c]={offset:o,size:a},o+=a}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=se.START,i,o,c){if(i<=0)return 0;const a=this.getSizeAndPositionForIndex(c),u=a.offset,x=u-i+a.size;let m;switch(e){case se.END:m=x;break;case se.CENTER:m=u-(i-a.size)/2;break;case se.START:m=u;break;default:m=Math.max(x,Math.min(u,o))}const k=this.getTotalSize();return Math.max(0,Math.min(k-i,m))}getVisibleRange(e=0,i,o){if(this.getTotalSize()===0)return{start:0,end:0};const a=i+e;let u=this.findNearestItem(i);if(u===void 0)throw Error(`Invalid offset ${i} specified`);const x=this.getSizeAndPositionForIndex(u);i=x.offset+x.size;let m=u;for(;i<a&&m<this.modelCount-1;)m++,i+=this.getSizeAndPositionForIndex(m).size;return o&&(u=Math.max(0,u-o),m=Math.min(m+o,this.modelCount-1)),{start:u,end:m}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const i=this.getSizeAndPositionOfLastMeasuredItem(),o=Math.max(0,this.lastMeasuredIndex);return i.offset>=e?this.binarySearch(0,o,e):this.exponentialSearch(o,e)}binarySearch(e,i,o){let c=0,a=0;for(;e<=i;){if(c=e+Math.floor((i-e)/2),a=this.getSizeAndPositionForIndex(c).offset,a===o)return c;a<o?e=c+1:a>o&&(i=c-1)}return e>0?e-1:0}exponentialSearch(e,i){let o=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<i;)e+=o,o*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),i)}}const qe=(()=>{let r=!1;try{const e=Object.defineProperty({},"passive",{get(){return r={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return r})();var Ze=Ee('<div><!> <div class="virtual-list-inner svelte-f32i87"></div> <!></div>');function $e(r,e){Me(e,!0);const i=y(e,"width",3,"100%"),o=y(e,"model",19,()=>[]),c=y(e,"windowOverPadding",3,3),a=y(e,"scrollDirection",19,()=>w.VERTICAL),u=y(e,"scrollToAlignment",19,()=>se.AUTO),x=y(e,"scrollToBehaviour",19,()=>Oe.INSTANT),m=y(e,"class",3,"");y(e,"style",3,"");const k=ke(e,["$$slots","$$events","$$legacy","height","width","model","modelCount","itemSize","estimatedItemSize","getKey","scrollToIndex","scrollOffset","windowOverPadding","scrollDirection","scrollToAlignment","scrollToBehaviour","footer","slot","header","onVisibleRangeUpdate","onAfterScroll","class","style"]),Y={[w.VERTICAL]:"top",[w.HORIZONTAL]:"left"},X={[w.VERTICAL]:"scrollTop",[w.HORIZONTAL]:"scrollLeft"},h=new je(o(),e.modelCount,e.itemSize,e.estimatedItemSize);let O=!1,F,Ie=Q(W([])),M=Q(W({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&re(e.scrollToIndex)||0,scrollChangeReason:de.REQUESTED})),V={},D={scrollToIndex:e.scrollToIndex,scrollToAlignment:u(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},G={},j=Q(""),_=Q("");ze(()=>{e.scrollToIndex,u(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,oe()}),ze(()=>{const{offset:d,scrollChangeReason:f}=n(M);(V.offset!==d||V.scrollChangeReason!==f)&&ee(),V.offset!==d&&f===de.REQUESTED&&q(d),V=n(M)}),ze(()=>{e.height,i(),O&&P(0)}),(()=>{if(a()===w.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical'");if(a()===w.HORIZONTAL&&typeof i()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal'");ee()})(),De(()=>{F.addEventListener("scroll",le,qe),e.scrollOffset!==void 0?q(e.scrollOffset):e.scrollToIndex!==void 0&&q(re(e.scrollToIndex)),O=!0}),Fe(()=>{O&&F.removeEventListener("scroll",le)});function oe(){if(!O)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset MUST NOT be used together.");const d=D.scrollToIndex!==e.scrollToIndex||D.scrollToAlignment!==u(),f=D.modelCount!==e.modelCount||D.itemSize!==e.itemSize||D.estimatedItemSize!==e.estimatedItemSize;f&&(h.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),P()),D.scrollOffset!==e.scrollOffset?R(M,W({offset:e.scrollOffset||0,scrollChangeReason:de.REQUESTED})):typeof e.scrollToIndex=="number"&&(d||f)&&R(M,W({offset:re(e.scrollToIndex,u(),e.modelCount),scrollChangeReason:de.REQUESTED})),D={scrollToIndex:e.scrollToIndex,scrollToAlignment:u(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function ee(){const{offset:d}=n(M);let{start:f,end:z}=h.getVisibleRange(a()===w.VERTICAL?e.height:i(),d,c()),U=[];const ie=h.getTotalSize(),ae=typeof e.height=="number"?"px":"",he=typeof i()=="number"?"px":"";if(a()===w.VERTICAL?(R(j,`height:${e.height}${ae};width:${i()}${he};`),R(_,`flex-direction:column;height:${ie}px;`)):(R(j,`height:${e.height}${ae};width:${i()}${he};`),R(_,`min-height:100%;width:${ie}px;`)),f!==void 0&&z!==void 0){for(let H=f;H<=z;(H+=1)-1)U.push({item:o()[H],index:H,style:Te(H)});if(e.onVisibleRangeUpdate){const H=h.getVisibleRange(a()===w.VERTICAL?e.height:i(),d,0);e.onVisibleRangeUpdate({type:"range.update",start:H.start,end:H.end})}}R(Ie,W(U))}function q(d){"scroll"in F?F.scroll({[Y[a()]]:d,behavior:x()}):F[X[a()]]=d}function P(d=0){G={},h.resetItem(d),ee()}function re(d,f=u(),z=e.modelCount){return d<0?d=0:d>=z&&(d=z-1),h.getUpdatedOffsetForIndex(f,a()===w.VERTICAL?e.height:i(),n(M).offset||0,d)}const le=d=>{const f=F[X[a()]];f<0||n(M).offset===f||d.target!==F||(R(M,W({offset:f,scrollChangeReason:de.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:f,event:d}))};function Te(d){if(G[d])return G[d];const{size:f,offset:z}=h.getSizeAndPositionForIndex(d);let U;return a()===w.VERTICAL?U=`left:0;width:100%;height:${f}px;position:absolute;top:${z}px;`:U=`top:0;width:${f}px;position:absolute;height:100%;left:${z}px;`,G[d]=U}var Z=Ze();be(Z,d=>F=d,()=>F);let xe;var ue=ve(Z);J(ue,()=>e.header,d=>{var f=C(),z=E(f);B(z,()=>e.header),S(d,f)});var te=fe(ue,2);ge(te,21,()=>n(Ie),Se,(d,f)=>{var z=C(),U=E(z),ie=He(()=>({item:n(f).item,style:n(f).style,index:e.getKey?e.getKey(n(f).index):n(f).index}));B(U,()=>e.slot,()=>n(ie)),S(d,z)}),ce(te);var Ce=fe(te,2);return J(Ce,()=>e.footer,d=>{var f=C(),z=E(f);B(z,()=>e.footer),S(d,f)}),ce(Z),ye(()=>{xe=We(Z,xe,{class:`virtual-list-wrapper $${m()??""}`,style:n(j),...k},"svelte-f32i87"),Ae(te,"style",n(_))}),S(r,Z),Ve({recomputeSizes:P})}var Oe=(r=>(r.AUTO="auto",r.SMOOTH="smooth",r.INSTANT="instant",r))(Oe||{}),se=(r=>(r.AUTO="auto",r.START="start",r.CENTER="center",r.END="end",r))(se||{}),w=(r=>(r.HORIZONTAL="horizontal",r.VERTICAL="vertical",r))(w||{}),de=(r=>(r[r.OBSERVED=0]="OBSERVED",r[r.REQUESTED=1]="REQUESTED",r))(de||{});function we(r,e,i={}){i={start:0,end:r.length-1,maxTimes:1e3,...i};let o=i.start,c=i.end;const a=i.returnNearestIfNoHit,u=i.maxTimes;let x,m;o||(o=0,c=r.length-1);let k=0,Y=0;for(;o>=0&&o<=c;){if(k>=u)throw Error(`binarySearch: loop times is over ${u}, you can increase the limit.`);x=Math.floor((c-o)/2+o),m=r[x];const X=k+1;if(Y=e(m,x,X),Y>0)c=x-1;else if(Y<0)o=x+1;else return{index:x,value:m,count:X,hit:!0};k++}return a?{index:x,value:m,count:k+1,hit:!1,greater:Y>0}:null}const Ke=(()=>{let r=!1;try{const e=Object.defineProperty({},"passive",{get(){return r={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return r})();var Je=Ee('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),Ye=Ee('<div class="vtlist-inner"><!> <!> <!></div>'),Xe=Ee("<div><!></div>");function et(r,e){Me(e,!0);var i;(function(s){s[s.OBSERVED=0]="OBSERVED",s[s.REQUESTED=1]="REQUESTED"})(i||(i={}));const o=y(e,"items",19,()=>[]),c=y(e,"isDisabled",3,!1),a=y(e,"isHorizontal",3,!1),u=y(e,"isTable",3,!1),x=y(e,"preRenderCount",3,6);y(e,"scrollToAlignment",19,()=>se.AUTO);const m=y(e,"scrollToBehaviour",19,()=>Oe.INSTANT),k=y(e,"class",3,""),Y=y(e,"style",3,"");let X=!1,h,O,F=Q(0),Ie=Q(0),M=100,V=Q(0),D=Q(x()-1),G=Q(0),j=Q(W({offset:e.scrollOffset||e.scrollToIndex!==void 0&&1||0,scrollChangeReason:i.REQUESTED})),_;const oe=N(()=>{var t;const s=(((t=o())==null?void 0:t.length)||1)-1;return n(D)<s?n(D):s}),ee=N(()=>new Array(o().length)),q=N(()=>o().map((s,t)=>{var g;let l=(g=e.sizingCalculator)==null?void 0:g.call(e,t,s);return l!==void 0||(l=n(ee)[t],l!==void 0)?l:n(G)})),P=N(()=>{const s=[];return n(q).reduce((t,l)=>(s.push(t),t+l),0),s}),re=N(()=>{if(!o()||c())return[];const s=[];for(let t=n(V);t<=n(oe);(t+=1)-1){const l=o()[t];l&&s.push({item:l,index:t,size:n(q)[t]})}return s}),le=N(()=>n(P)[n(V)]?n(P)[n(V)]:0),Te=N(()=>n(P).length>0?n(P)[n(P).length-1]+n(q)[n(q).length-1]:0),Z=N(()=>n(P)[n(oe)]?n(Te)-n(P)[n(oe)]-n(q)[n(oe)]:0),xe=N(()=>Re(!c()&&"overflow:auto;",Y())),ue=N(()=>Re(!u()&&"display:flex;",!u()&&(!a()&&"flex-direction:column;"||"flex-direction:row;"),!c()&&(!a()&&`margin-top:${n(le)}px;margin-bottom:${n(Z)}px`||`margin-left:${n(le)}px;margin-right:${n(Z)}px;width:${n(Te)-n(Z)-n(le)}px`)));De(()=>{h.addEventListener("scroll",te,Ke),X=!0,f()}),Fe(()=>{X&&h.removeEventListener("scroll",te)}),ze(()=>{const{offset:s,scrollChangeReason:t}=n(j);((_==null?void 0:_.offset)!==s||(_==null?void 0:_.scrollChangeReason)!==t)&&f(),(_==null?void 0:_.offset)!==s&&t===i.REQUESTED&&H(s),_=n(j)}),ze(()=>{var s;return(s=e.onVisibleRangeUpdate)==null?void 0:s.call(e,{type:"range.update",start:n(V),end:n(D)})});function te(s){var l;const t=ae(h);s.target!==h||t<0||n(j).offset===t||M-Math.abs(t-n(j).offset)>=1||(R(j,W({offset:t,scrollChangeReason:i.OBSERVED})),(l=e.onAfterScroll)==null||l.call(e,{type:"scroll.update",offset:t,event:s}))}function Ce(){const s=ae(h)-he(h)-M;return we(n(P),l=>l-s,{returnNearestIfNoHit:!0}).index}function d(){const s=ae(h)-he(h)+U(h)+M;return we(n(P),l=>l-s,{returnNearestIfNoHit:!0}).index}function f(){n(G)||R(G,W(z())),R(V,W(Ce())),R(D,W(d()));let s=0;const t={},l=u()?O.querySelector("tbody").children:O.children;for(let g=0;g<l.length;(g+=1)-1){const b=l[g],A=getComputedStyle(b),I=A.position;if(I&&["absolute","fixed"].includes(I))continue;const v=A.display!=="none"?ie(b):0,T=n(V)+s;t[T]=(t[T]||0)+v,s+=1}for(const g of Object.keys(t)){const b=parseInt(g);n(ee)[b]!==t[b]&&(n(ee)[b]=t[b])}}function z(){const t=[],l=u()?O.querySelector("tbody").children:O.children;for(let g=0;g<l.length;(g+=1)-1){const b=l[g],A=getComputedStyle(b);if(["absolute","fixed"].includes(A.position))continue;const I=ie(b);if(t.push(I),t.length>=10)break}return t.length===0?0:t.reduce((g,b)=>g+b,0)/t.length}function U(s){const t=getComputedStyle(s);let l=parseFloat(a()?t.width:t.height);return t.boxSizing==="border-box"&&(a()?l-=parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):l-=parseFloat(t.borderTopWidth)-parseFloat(t.borderBottomWidth)),l}function ie(s){const t=getComputedStyle(s);let l=U(s);return a()?l+=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)+parseFloat(t.marginLeft)+parseFloat(t.marginRight):l+=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth)+parseFloat(t.marginTop)+parseFloat(t.marginBottom),Number.isNaN(l)?0:l}function ae(s){return a()?s.scrollLeft:s.scrollTop}function he(s){const t=getComputedStyle(s);return a()?parseFloat(t.paddingLeft):parseFloat(t.paddingTop)}function H(s){if("scroll"in h){const t={behavior:m()};t[a()?"left":"top"]=s,h.scroll(t)}else h[a()?"scrollLeft":"scrollTop"]=s}var p=Xe();be(p,s=>h=s,()=>h);const Ue=N(()=>Re("vtlist",k()));var Le=ve(p);J(Le,u,s=>{var t=Je(),l=E(t);be(l,v=>O=v,()=>O);var g=ve(l);J(g,()=>e.header,v=>{var T=C(),L=E(T);B(L,()=>e.header),S(v,T)});var b=fe(g),A=ve(b);J(A,c,v=>{var T=C(),L=E(T);ge(L,17,o,Se,(K,ne)=>{var me=C(),_e=E(me);B(_e,()=>e.vl_slot,()=>n(ne)),S(K,me)}),S(v,T)},v=>{var T=C(),L=E(T);ge(L,17,()=>n(re),Se,(K,ne)=>{var me=C(),_e=E(me);B(_e,()=>e.vl_slot,()=>n(ne)),S(K,me)}),S(v,T)}),ce(b),ce(l);var I=fe(l,2);J(I,()=>e.footer,v=>{var T=C(),L=E(T);B(L,()=>e.footer),S(v,T)}),ye(()=>Ae(l,"style",n(ue))),S(s,t)},s=>{var t=Ye();be(t,A=>O=A,()=>O);var l=ve(t);J(l,()=>e.header,A=>{var I=C(),v=E(I);B(v,()=>e.header),S(A,I)});var g=fe(l,2);J(g,c,A=>{var I=C(),v=E(I);ge(v,17,o,Se,(T,L)=>{var K=C(),ne=E(K);B(ne,()=>e.vl_slot,()=>n(L)),S(T,K)}),S(A,I)},A=>{var I=C(),v=E(I);ge(v,17,()=>n(re),Se,(T,L)=>{var K=C(),ne=E(K);B(ne,()=>e.vl_slot,()=>n(L)),S(T,K)}),S(A,I)});var b=fe(g,2);J(b,()=>e.footer,A=>{var I=C(),v=E(I);B(v,()=>e.footer),S(A,I)}),ce(t),ye(()=>Ae(t,"style",n(ue))),S(s,t)}),ce(p),ye(()=>{Qe(p,n(Ue)),Ae(p,"style",n(xe))}),Pe(p,"clientHeight",s=>R(F,s)),Pe(p,"clientWidth",s=>R(Ie,s)),S(r,p),Ve()}export{se as A,w as D,Oe as S,et as V,$e as a};
