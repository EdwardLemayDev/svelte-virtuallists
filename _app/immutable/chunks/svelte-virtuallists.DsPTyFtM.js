import{p as Be,a as O,s as V,b as W,o as He,c as Qe,u as re,g as n,d as fe,i as A,t as ce,e as _e,f as g,h as je,j as he,k as D,l as b,m as v,n as F,q as Y,r as Z,v as _,w as G,x as P,y as p,z as de,A as qe,B as ue}from"./external.BR_3oSYm.js";const Je=(()=>{let h=!1;try{const o=Object.defineProperty({},"passive",{get(){return h={passive:!0},!0}});window.addEventListener("testpassive",o,o),window.remove("testpassive",o,o)}catch{}return h})();var Ke=he('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),Le=he('<div class="vtlist-inner"><!> <!> <!></div>'),Xe=he("<div><!></div>");function Ze(h,o){Be(o,!0);var M;(function(e){e[e.OBSERVED=0]="OBSERVED",e[e.REQUESTED=1]="REQUESTED"})(M||(M={}));const u=O(o,"items",19,()=>[]),H=O(o,"isDisabled",3,!1),x=O(o,"isHorizontal",3,!1),Q=O(o,"isTable",3,!1),ye=O(o,"preRenderCount",3,6),K=O(o,"scrollToAlignment",19,()=>B.AUTO),ze=O(o,"scrollToBehaviour",19,()=>Se.INSTANT),Ie=O(o,"class",3,""),Ee=O(o,"style",3,""),Oe=3;let $=!1,w=-1,y,C,N=V(0),k=V(0),j=V(0),ee=V(ye()-1),q=V(0),z=V(W({offset:o.scrollToOffset||o.scrollToIndex!==void 0&&u().length&&oe(o.scrollToIndex)&&1||0,scrollChangeReason:M.REQUESTED})),S;const L=_(()=>{var t;const e=(((t=u())==null?void 0:t.length)||1)-1;return n(ee)<e?n(ee):e}),te=_(()=>new Array(u().length)),I=_(()=>u().map((e,t)=>{var i;let l=(i=o.sizingCalculator)==null?void 0:i.call(o,t,e);return l!==void 0||(l=n(te)[t],l!==void 0)?l:n(q)})),T=_(()=>{const e=[];return n(I).reduce((t,l)=>(e.push(t),t+l),0),e}),ge=_(()=>{if(!u()||H())return[];const e=[];for(let t=n(j);t<=n(L);(t+=1)-1){const l=u()[t];l&&e.push({item:l,index:t,size:n(I)[t]})}return e}),ne=_(()=>n(T)[n(j)]?n(T)[n(j)]:0),X=_(()=>n(T).length>0?n(T)[n(T).length-1]+n(I)[n(I).length-1]:0),le=_(()=>n(T)[n(L)]?n(X)-n(T)[n(L)]-n(I)[n(L)]:0),Ce=_(()=>ue(!H()&&"overflow:auto;",Ee())),me=_(()=>ue(!Q()&&"display:flex;",!Q()&&(!x()&&"flex-direction:column;"||"flex-direction:row;"),!H()&&(!x()&&`margin-top:${n(ne)}px;margin-bottom:${n(le)}px`||`margin-left:${n(ne)}px;margin-right:${n(le)}px;width:${n(X)-n(le)-n(ne)}px`)));He(()=>{y.addEventListener("scroll",ve,Je),se(),o.scrollToOffset!==void 0?ae(o.scrollToOffset):o.scrollToIndex!==void 0&&ae(oe(o.scrollToIndex)),$=!0}),Qe(()=>{$&&y.removeEventListener("scroll",ve)}),re(()=>{o.scrollToIndex,K(),o.scrollToOffset,u().length,o.sizingCalculator,Re()}),re(()=>{if(o.onVisibleRangeUpdate){const e=be(x()?n(k):n(N),n(z).offset);o.onVisibleRangeUpdate(e)}}),re(()=>{const{offset:e,scrollChangeReason:t}=n(z);((S==null?void 0:S.offset)!==e||(S==null?void 0:S.scrollChangeReason)!==t)&&se(),(S==null?void 0:S.offset)!==e&&t===M.REQUESTED&&ae(e),S=n(z)});let r={};function Re(){if(!$)return;o.scrollToIndex&&o.scrollToOffset&&console.log("VirtualList: scrollToIndex and scrollToOffset MUST NOT be used together.");const e=(r==null?void 0:r.scrollToIndex)!==o.scrollToIndex||(r==null?void 0:r.scrollToAlignment)!==K(),t=(r==null?void 0:r.modelCount)!==u().length||(r==null?void 0:r.sizingCalculator)!==o.sizingCalculator||(r==null?void 0:r.avgSizeInPx)!==n(q)||(r==null?void 0:r.clientHeight)!==n(N)||(r==null?void 0:r.clientWidth)!==n(k);t&&De(),(r==null?void 0:r.scrollToOffset)!==o.scrollToOffset?D(z,W({offset:o.scrollToOffset||0,scrollChangeReason:M.REQUESTED})):typeof o.scrollToIndex=="number"&&(e||t)&&D(z,W({offset:oe(o.scrollToIndex),scrollChangeReason:M.REQUESTED})),r={scrollToIndex:o.scrollToIndex,scrollToAlignment:K(),scrollToOffset:o.scrollToOffset,modelCount:u().length,sizingCalculator:o.sizingCalculator,avgSizeInPx:n(q),clientHeight:n(N),clientWidth:n(k)}}function De(e=0){w=Math.min(w,e-1),se()}function ve(e){var l;const t=Ne(y);e.target!==y||t<0||n(z).offset===t||(D(z,W({offset:t,scrollChangeReason:M.OBSERVED})),(l=o.onAfterScroll)==null||l.call(o,{offset:t,event:e}))}function oe(e,t=K(),l=u().length){return e<0?e=0:e>=l&&(e=l-1),Fe(t,x()?n(k):n(N),n(z).offset||0,e)}function Fe(e=B.START,t,l,i){if(t<=0)return 0;const f=n(I)[i],s=n(T)[i],c=s-t+f;let a;switch(e){case B.END:a=c;break;case B.CENTER:a=s-(t-f)/2;break;case B.START:a=s;break;default:a=Math.max(c,Math.min(s,l))}const d=n(X);return Math.max(0,Math.min(d-t,a))}function Me(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=Ue(),l=Math.max(0,w);return t.offset>=e?Te(0,l,e):We(l,e)}function Ue(){return w>=0?{offset:n(T)[w],size:n(I)[w]}:{offset:0,size:0}}function Te(e,t,l){let i=0,f=0;for(;e<=t;){if(i=e+Math.floor((t-e)/2),f=n(T)[i],f===l)return i;f<l?e=i+1:f>l&&(t=i-1)}return e>0?e-1:0}function We(e,t){let l=1;for(;e<u().length&&n(T)[e]<t;)e+=l,l*=2;return Te(Math.floor(e/2),Math.min(e,u().length-1),t)}function se(){n(q)||D(q,W(Ae()));const e=be(x()?n(k):n(N),n(z).offset,Oe);D(j,W(e.start)),D(ee,W(e.end));let t=0;const l={},i=Q()?C.querySelector("tbody").children:C.children;for(let f=0;f<i.length;(f+=1)-1){const s=i[f],c=getComputedStyle(s),a=c.position;if(a&&["absolute","fixed"].includes(a))continue;const d=c.display!=="none"?xe(s):0,m=n(j)+t;l[m]=(l[m]||0)+d,t+=1}for(const f of Object.keys(l)){const s=parseInt(f);n(te)[s]!==l[s]&&(n(te)[s]=l[s])}}function Ae(){const t=[],l=Q()?C.querySelector("tbody").children:C.children;for(let i=0;i<l.length;(i+=1)-1){const f=l[i],s=getComputedStyle(f);if(["absolute","fixed"].includes(s.position))continue;const c=xe(f);if(t.push(c),t.length>=10)break}return t.length===0?0:t.reduce((i,f)=>i+f,0)/t.length}function we(e){const t=getComputedStyle(e);let l=parseFloat(x()?t.width:t.height);return t.boxSizing==="border-box"&&(x()?l-=parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):l-=parseFloat(t.borderTopWidth)-parseFloat(t.borderBottomWidth)),l}function be(e=0,t,l=0){if(n(X)===0)return{start:0,end:0};const f=t+e;let s=Me(t);if(s===void 0)throw Error(`Invalid offset ${t} specified`);let c=n(T)[s]+n(I)[s],a=s;for(;c<f&&a<u().length-1;)a+=1,c+=n(I)[a];return l>0&&(s=Math.max(0,s-l),a=Math.min(a+l,u().length-1)),{start:s,end:a}}function xe(e){const t=getComputedStyle(e);let l=we(e);return x()?l+=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)+parseFloat(t.marginLeft)+parseFloat(t.marginRight):l+=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth)+parseFloat(t.marginTop)+parseFloat(t.marginBottom),Number.isNaN(l)?0:l}function Ne(e){return x()?e.scrollLeft:e.scrollTop}function ae(e){if("scroll"in y){const t={behavior:ze()};t[x()?"left":"top"]=e,y.scroll(t)}else y[x()?"scrollLeft":"scrollTop"]=e}var R=Xe();fe(R,e=>y=e,()=>y);const ke=_(()=>ue("vtlist",Ie()));var Ve=G(R);A(Ve,Q,e=>{var t=Ke(),l=v(t);fe(l,a=>C=a,()=>C);var i=G(l);A(i,()=>o.header,a=>{var d=b(),m=v(d);F(m,()=>o.header),g(a,d)});var f=Y(i),s=G(f);A(s,H,a=>{var d=b(),m=v(d);Z(m,17,u,P,(E,U)=>{var J=b(),ie=v(J);F(ie,()=>o.vl_slot,()=>n(U)),g(E,J)}),g(a,d)},a=>{var d=b(),m=v(d);Z(m,17,()=>n(ge),P,(E,U)=>{var J=b(),ie=v(J);F(ie,()=>o.vl_slot,()=>n(U)),g(E,J)}),g(a,d)}),p(f),p(l);var c=Y(l,2);A(c,()=>o.footer,a=>{var d=b(),m=v(d);F(m,()=>o.footer),g(a,d)}),ce(()=>de(l,"style",n(me))),g(e,t)},e=>{var t=Le();fe(t,s=>C=s,()=>C);var l=G(t);A(l,()=>o.header,s=>{var c=b(),a=v(c);F(a,()=>o.header),g(s,c)});var i=Y(l,2);A(i,H,s=>{var c=b(),a=v(c);Z(a,17,u,P,(d,m)=>{var E=b(),U=v(E);F(U,()=>o.vl_slot,()=>n(m)),g(d,E)}),g(s,c)},s=>{var c=b(),a=v(c);Z(a,17,()=>n(ge),P,(d,m)=>{var E=b(),U=v(E);F(U,()=>o.vl_slot,()=>n(m)),g(d,E)}),g(s,c)});var f=Y(i,2);A(f,()=>o.footer,s=>{var c=b(),a=v(c);F(a,()=>o.footer),g(s,c)}),p(t),ce(()=>de(t,"style",n(me))),g(e,t)}),p(R),ce(()=>{qe(R,n(ke)),de(R,"style",n(Ce))}),_e(R,"clientHeight",e=>D(N,e)),_e(R,"clientWidth",e=>D(k,e)),g(h,R),je()}var Se=(h=>(h.AUTO="auto",h.SMOOTH="smooth",h.INSTANT="instant",h))(Se||{}),B=(h=>(h.AUTO="auto",h.START="start",h.CENTER="center",h.END="end",h))(B||{});export{B as A,Se as S,Ze as V};
