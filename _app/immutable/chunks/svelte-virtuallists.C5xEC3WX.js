var ke=Object.defineProperty;var We=(a,e,t)=>e in a?ke(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var W=(a,e,t)=>We(a,typeof e!="symbol"?e+"":e,t);import{p as we,a as I,s as K,b as U,u as he,o as _e,c as Fe,g as i,d as y,e as Pe,i as ie,f as Ie,t as Ce,h as T,j as Ue,k as Oe,l as fe,m as Te,n as xe,r as ce,q as qe,v as Ee,w as Ke,x as w,y as P,z as q,A as Le,B as Re,C as Y,D as Be,E as Me}from"./external.B2XIb3UX.js";let Je=class{constructor(e,t,n,l){W(this,"model");W(this,"modelCount");W(this,"itemSize");W(this,"estimatedItemSize");W(this,"itemSizeAndPositionData");W(this,"lastMeasuredIndex");W(this,"totalSize");this.model=e,this.itemSize=n,this.modelCount=t,this.estimatedItemSize=l,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,t,n){t!==void 0&&(this.modelCount=t),n!==void 0&&(this.estimatedItemSize=n),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?t(this.model[e],e):Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.modelCount;t++){const n=this.getSize(t);this.itemSizeAndPositionData[t]={offset:e,size:n},e+=n}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.modelCount)throw Error(`Requested index ${e} is outside of range 0..${this.modelCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let n=t.offset+t.size;for(let l=this.lastMeasuredIndex+1;l<=e;l++){const o=this.getSize(l);if(o===void 0||isNaN(o))throw Error(`Invalid size returned for index ${l} of value ${o}`);this.itemSizeAndPositionData[l]={offset:n,size:o},n+=o}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=ge.START,t,n,l){if(t<=0)return 0;const o=this.getSizeAndPositionForIndex(l),f=o.offset,S=f-t+o.size;let u;switch(e){case ge.END:u=S;break;case ge.CENTER:u=f-(t-o.size)/2;break;case ge.START:u=f;break;default:u=Math.max(S,Math.min(f,n))}const A=this.getTotalSize();return Math.max(0,Math.min(A-t,u))}getVisibleRange(e=0,t,n){if(this.getTotalSize()===0)return{start:0,end:0};const o=t+e;let f=this.findNearestItem(t);if(f===void 0)throw Error(`Invalid offset ${t} specified`);const S=this.getSizeAndPositionForIndex(f);t=S.offset+S.size;let u=f;for(;t<o&&u<this.modelCount-1;)u++,t+=this.getSizeAndPositionForIndex(u).size;return n&&(f=Math.max(0,f-n),u=Math.min(u+n,this.modelCount-1)),{start:f,end:u}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,n,e):this.exponentialSearch(n,e)}binarySearch(e,t,n){let l=0,o=0;for(;e<=t;){if(l=e+Math.floor((t-e)/2),o=this.getSizeAndPositionForIndex(l).offset,o===n)return l;o<n?e=l+1:o>n&&(t=l-1)}return e>0?e-1:0}exponentialSearch(e,t){let n=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=n,n*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),t)}};const Ze=(()=>{let a=!1;try{const e=Object.defineProperty({},"passive",{get(){return a={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return a})();var Ye=Oe('<div><!> <div class="virtual-list-inner svelte-f32i87"></div> <!></div>');function at(a,e){we(e,!0);const t=I(e,"width",3,"100%"),n=I(e,"model",19,()=>[]),l=I(e,"windowOverPadding",3,3),o=I(e,"scrollDirection",19,()=>Z.VERTICAL),f=I(e,"scrollToAlignment",19,()=>ge.AUTO),S=I(e,"scrollToBehaviour",19,()=>Ve.INSTANT),u=I(e,"class",3,"");I(e,"style",3,"");const A=Ke(e,["$$slots","$$events","$$legacy","height","width","model","modelCount","itemSize","estimatedItemSize","getKey","scrollToIndex","scrollOffset","windowOverPadding","scrollDirection","scrollToAlignment","scrollToBehaviour","footer","slot","header","onVisibleRangeUpdate","onAfterScroll","class","style"]),L={[Z.VERTICAL]:"top",[Z.HORIZONTAL]:"left"},B={[Z.VERTICAL]:"scrollTop",[Z.HORIZONTAL]:"scrollLeft"},z=new Je(n(),e.modelCount,e.itemSize,e.estimatedItemSize);let v=!1,H,j=K(U([])),_=K(U({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&Q(e.scrollToIndex)||0,scrollChangeReason:ze.REQUESTED})),C={},k={scrollToIndex:e.scrollToIndex,scrollToAlignment:f(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},ne={},G=K(""),M=K("");he(()=>{e.scrollToIndex,f(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,se()}),he(()=>{const{offset:d,scrollChangeReason:g}=i(_);(C.offset!==d||C.scrollChangeReason!==g)&&p(),C.offset!==d&&g===ze.REQUESTED&&J(d),C=i(_)}),he(()=>{e.height,t(),v&&V(0)}),(()=>{if(o()===Z.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical'");if(o()===Z.HORIZONTAL&&typeof t()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal'");p()})(),_e(()=>{H.addEventListener("scroll",ae,Ze),e.scrollOffset!==void 0?J(e.scrollOffset):e.scrollToIndex!==void 0&&J(Q(e.scrollToIndex)),v=!0}),Fe(()=>{v&&H.removeEventListener("scroll",ae)});function se(){if(!v)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset MUST NOT be used together.");const d=k.scrollToIndex!==e.scrollToIndex||k.scrollToAlignment!==f(),g=k.modelCount!==e.modelCount||k.itemSize!==e.itemSize||k.estimatedItemSize!==e.estimatedItemSize;g&&(z.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),V()),k.scrollOffset!==e.scrollOffset?y(_,U({offset:e.scrollOffset||0,scrollChangeReason:ze.REQUESTED})):typeof e.scrollToIndex=="number"&&(d||g)&&y(_,U({offset:Q(e.scrollToIndex,f(),e.modelCount),scrollChangeReason:ze.REQUESTED})),k={scrollToIndex:e.scrollToIndex,scrollToAlignment:f(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function p(){const{offset:d}=i(_);let{start:g,end:O}=z.getVisibleRange(o()===Z.VERTICAL?e.height:t(),d,l()),ee=[];const ue=z.getTotalSize(),Se=typeof e.height=="number"?"px":"",ye=typeof t()=="number"?"px":"";if(o()===Z.VERTICAL?(y(G,`height:${e.height}${Se};width:${t()}${ye};`),y(M,`flex-direction:column;height:${ue}px;`)):(y(G,`height:${e.height}${Se};width:${t()}${ye};`),y(M,`min-height:100%;width:${ue}px;`)),g!==void 0&&O!==void 0){for(let oe=g;oe<=O;(oe+=1)-1)ee.push({item:n()[oe],index:oe,style:le(oe)});if(e.onVisibleRangeUpdate){const oe=z.getVisibleRange(o()===Z.VERTICAL?e.height:t(),d,0);e.onVisibleRangeUpdate({type:"range.update",start:oe.start,end:oe.end})}}y(j,U(ee))}function J(d){"scroll"in H?H.scroll({[L[o()]]:d,behavior:S()}):H[B[o()]]=d}function V(d=0){ne={},z.resetItem(d),p()}function Q(d,g=f(),O=e.modelCount){return d<0?d=0:d>=O&&(d=O-1),z.getUpdatedOffsetForIndex(g,o()===Z.VERTICAL?e.height:t(),i(_).offset||0,d)}const ae=d=>{const g=H[B[o()]];g<0||i(_).offset===g||d.target!==H||(y(_,U({offset:g,scrollChangeReason:ze.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:g,event:d}))};function le(d){if(ne[d])return ne[d];const{size:g,offset:O}=z.getSizeAndPositionForIndex(d);let ee;return o()===Z.VERTICAL?ee=`left:0;width:100%;height:${g}px;position:absolute;top:${O}px;`:ee=`top:0;width:${g}px;position:absolute;height:100%;left:${O}px;`,ne[d]=ee}var $=Ye();Pe($,d=>H=d,()=>H);let c;var m=Te($);ie(m,()=>e.header,d=>{var g=w(),O=P(g);q(O,()=>e.header),T(d,g)});var x=fe(m,2);Ie(x,21,()=>i(j),xe,(d,g)=>{var O=w(),ee=P(O),ue=Le(()=>({item:i(g).item,style:i(g).style,index:e.getKey?e.getKey(i(g).index):i(g).index}));q(ee,()=>e.slot,()=>i(ue)),T(d,O)}),ce(x);var X=fe(x,2);return ie(X,()=>e.footer,d=>{var g=w(),O=P(g);q(O,()=>e.footer),T(d,g)}),ce($),Ce(()=>{c=qe($,c,{class:`virtual-list-wrapper $${u()??""}`,style:i(G),...A},"svelte-f32i87"),Ee(x,"style",i(M))}),T(a,$),Ue({recomputeSizes:V})}var Ve=(a=>(a.AUTO="auto",a.SMOOTH="smooth",a.INSTANT="instant",a))(Ve||{}),ge=(a=>(a.AUTO="auto",a.START="start",a.CENTER="center",a.END="end",a))(ge||{}),Z=(a=>(a.HORIZONTAL="horizontal",a.VERTICAL="vertical",a))(Z||{}),ze=(a=>(a[a.OBSERVED=0]="OBSERVED",a[a.REQUESTED=1]="REQUESTED",a))(ze||{});function Ne(a,e,t={}){t={start:0,end:a.length-1,maxTimes:1e3,...t};let n=t.start,l=t.end;const o=t.returnNearestIfNoHit,f=t.maxTimes;let S,u;n||(n=0,l=a.length-1);let A=0,L=0;for(;n>=0&&n<=l;){if(A>=f)throw Error(`binarySearch: loop times is over ${f}, you can increase the limit.`);S=Math.floor((l-n)/2+n),u=a[S];const B=A+1;if(L=e(u,S,B),L>0)l=S-1;else if(L<0)n=S+1;else return{index:S,value:u,count:B,hit:!0};A++}return o?{index:S,value:u,count:A+1,hit:!1,greater:L>0}:null}const Xe=(()=>{let a=!1;try{const e=Object.defineProperty({},"passive",{get(){return a={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return a})();var Ge=Oe('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),pe=Oe('<div class="vtlist-inner"><!> <!> <!></div>'),$e=Oe("<div><!></div>");function lt(a,e){we(e,!0);var t;(function(r){r[r.OBSERVED=0]="OBSERVED",r[r.REQUESTED=1]="REQUESTED"})(t||(t={}));const n=I(e,"items",19,()=>[]),l=I(e,"isDisabled",3,!1),o=I(e,"isHorizontal",3,!1),f=I(e,"isTable",3,!1),S=I(e,"preRenderCount",3,6);I(e,"scrollToAlignment",19,()=>ge.AUTO);const u=I(e,"scrollToBehaviour",19,()=>Ve.INSTANT),A=I(e,"class",3,""),L=I(e,"style",3,"");let B=!1,z,v,H=K(0),j=K(0),_=100,C=K(0),k=K(S()-1),ne=K(0),G=K(U({offset:e.scrollOffset||e.scrollToIndex!==void 0&&1||0,scrollChangeReason:t.REQUESTED})),M;const se=Y(()=>{var s;const r=(((s=n())==null?void 0:s.length)||1)-1;return i(k)<r?i(k):r}),p=Y(()=>new Array(n().length)),J=Y(()=>n().map((r,s)=>{var E;let h=(E=e.sizingCalculator)==null?void 0:E.call(e,s,r);return h!==void 0||(h=i(p)[s],h!==void 0)?h:i(ne)})),V=Y(()=>{const r=[];return i(J).reduce((s,h)=>(r.push(s),s+h),0),r}),Q=Y(()=>{if(!n()||l())return[];const r=[];for(let s=i(C);s<=i(se);(s+=1)-1){const h=n()[s];h&&r.push({item:h,index:s,size:i(J)[s]})}return r}),ae=Y(()=>i(V)[i(C)]?i(V)[i(C)]:0),le=Y(()=>i(V).length>0?i(V)[i(V).length-1]+i(J)[i(J).length-1]:0),$=Y(()=>i(V)[i(se)]?i(le)-i(V)[i(se)]-i(J)[i(se)]:0),c=Y(()=>Me(!l()&&"overflow:auto;",L())),m=Y(()=>Me(!f()&&"display:flex;",!f()&&(!o()&&"flex-direction:column;"||"flex-direction:row;"),!l()&&(!o()&&`margin-top:${i(ae)}px;margin-bottom:${i($)}px`||`margin-left:${i(ae)}px;margin-right:${i($)}px;width:${i(le)-i($)-i(ae)}px`)));_e(()=>{z.addEventListener("scroll",x,Xe),B=!0,g()}),Fe(()=>{B&&z.removeEventListener("scroll",x)}),he(()=>{const{offset:r,scrollChangeReason:s}=i(G);((M==null?void 0:M.offset)!==r||(M==null?void 0:M.scrollChangeReason)!==s)&&g(),(M==null?void 0:M.offset)!==r&&s===t.REQUESTED&&oe(r),M=i(G)}),he(()=>{var r;return(r=e.onVisibleRangeUpdate)==null?void 0:r.call(e,{type:"range.update",start:i(C),end:i(k)})});function x(r){var h;const s=Se(z);r.target!==z||s<0||i(G).offset===s||_-Math.abs(s-i(G).offset)>=1||(y(G,U({offset:s,scrollChangeReason:t.OBSERVED})),(h=e.onAfterScroll)==null||h.call(e,{type:"scroll.update",offset:s,event:r}))}function X(){const r=Se(z)-ye(z)-_;return Ne(i(V),h=>h-r,{returnNearestIfNoHit:!0}).index}function d(){const r=Se(z)-ye(z)+ee(z)+_;return Ne(i(V),h=>h-r,{returnNearestIfNoHit:!0}).index}function g(){i(ne)||y(ne,U(O())),y(C,U(X())),y(k,U(d()));let r=0;const s={},h=f()?v.querySelector("tbody").children:v.children;for(let E=0;E<h.length;(E+=1)-1){const F=h[E],N=getComputedStyle(F),R=N.position;if(R&&["absolute","fixed"].includes(R))continue;const b=N.display!=="none"?ue(F):0,D=i(C)+r;s[D]=(s[D]||0)+b,r+=1}for(const E of Object.keys(s)){const F=parseInt(E);i(p)[F]!==s[F]&&(i(p)[F]=s[F])}}function O(){const s=[],h=f()?v.querySelector("tbody").children:v.children;for(let E=0;E<h.length;(E+=1)-1){const F=h[E],N=getComputedStyle(F);if(["absolute","fixed"].includes(N.position))continue;const R=ue(F);if(s.push(R),s.length>=10)break}return s.length===0?0:s.reduce((E,F)=>E+F,0)/s.length}function ee(r){const s=getComputedStyle(r);let h=parseFloat(o()?s.width:s.height);return s.boxSizing==="border-box"&&(o()?h-=parseFloat(s.borderLeftWidth)-parseFloat(s.borderRightWidth):h-=parseFloat(s.borderTopWidth)-parseFloat(s.borderBottomWidth)),h}function ue(r){const s=getComputedStyle(r);let h=ee(r);return o()?h+=parseFloat(s.borderLeftWidth)+parseFloat(s.borderRightWidth)+parseFloat(s.marginLeft)+parseFloat(s.marginRight):h+=parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth)+parseFloat(s.marginTop)+parseFloat(s.marginBottom),Number.isNaN(h)?0:h}function Se(r){return o()?r.scrollLeft:r.scrollTop}function ye(r){const s=getComputedStyle(r);return o()?parseFloat(s.paddingLeft):parseFloat(s.paddingTop)}function oe(r){if("scroll"in z){const s={behavior:u()};s[o()?"left":"top"]=r,z.scroll(s)}else z[o()?"scrollLeft":"scrollTop"]=r}var de=$e();Pe(de,r=>z=r,()=>z);const He=Y(()=>Me("vtlist",A()));var je=Te(de);ie(je,f,r=>{var s=Ge(),h=P(s);Pe(h,b=>v=b,()=>v);var E=Te(h);ie(E,()=>e.header,b=>{var D=w(),te=P(D);q(te,()=>e.header),T(b,D)});var F=fe(E),N=Te(F);ie(N,l,b=>{var D=w(),te=P(D);Ie(te,17,n,xe,(re,me)=>{var be=w(),De=P(be);q(De,()=>e.vl_slot,()=>i(me)),T(re,be)}),T(b,D)},b=>{var D=w(),te=P(D);Ie(te,17,()=>i(Q),xe,(re,me)=>{var be=w(),De=P(be);q(De,()=>e.vl_slot,()=>i(me)),T(re,be)}),T(b,D)}),ce(F),ce(h);var R=fe(h,2);ie(R,()=>e.footer,b=>{var D=w(),te=P(D);q(te,()=>e.footer),T(b,D)}),Ce(()=>Ee(h,"style",i(m))),T(r,s)},r=>{var s=pe();Pe(s,N=>v=N,()=>v);var h=Te(s);ie(h,()=>e.header,N=>{var R=w(),b=P(R);q(b,()=>e.header),T(N,R)});var E=fe(h,2);ie(E,l,N=>{var R=w(),b=P(R);Ie(b,17,n,xe,(D,te)=>{var re=w(),me=P(re);q(me,()=>e.vl_slot,()=>i(te)),T(D,re)}),T(N,R)},N=>{var R=w(),b=P(R);Ie(b,17,()=>i(Q),xe,(D,te)=>{var re=w(),me=P(re);q(me,()=>e.vl_slot,()=>i(te)),T(D,re)}),T(N,R)});var F=fe(E,2);ie(F,()=>e.footer,N=>{var R=w(),b=P(R);q(b,()=>e.footer),T(N,R)}),ce(s),Ce(()=>Ee(s,"style",i(m))),T(r,s)}),ce(de),Ce(()=>{Be(de,i(He)),Ee(de,"style",i(c))}),Re(de,"clientHeight",r=>y(H,r)),Re(de,"clientWidth",r=>y(j,r)),T(a,de),Ue()}class et{constructor(e,t,n){W(this,"model");W(this,"sizeCalculatorFn");W(this,"averageSize");W(this,"itemSizeAndPositionData",{});W(this,"lastMeasuredIndex",-1);W(this,"totalSize");this.model=e,this.sizeCalculatorFn=t,this.averageSize=n,this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.sizeCalculatorFn=="function"}mutateState(e,t,n){t&&this.model.length!==t.length&&(this.model=t),n!==void 0&&(this.averageSize=n),e!==void 0&&(this.sizeCalculatorFn=e),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}getSize(e){var t;return((t=this.sizeCalculatorFn)==null?void 0:t.call(this,this.model[e],e))||this.averageSize}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.model.length;t++){let n=this.getSize(t);n||(console.log("item size is undefined"),n=0),this.itemSizeAndPositionData[t]={offset:e,size:n},e+=n}this.totalSize=e}getSizeAndPositionForIndex(e){if(e<0||e>=this.model.length)throw Error(`Requested index ${e} is outside of range 0..${this.model.length}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let n=t.offset+t.size;for(let l=this.lastMeasuredIndex+1;l<=e;l++){const o=this.getSize(l);if(o===void 0||isNaN(o))throw Error(`Invalid size returned for index ${l} of value ${o}`);this.itemSizeAndPositionData[l]={offset:n,size:o},n+=o}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.averageSize||typeof this.sizeCalculatorFn=="number"&&this.sizeCalculatorFn||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.model.length-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=Ae.START,t,n,l){if(t<=0)return 0;const o=this.getSizeAndPositionForIndex(l),f=o.offset,S=f-t+o.size;let u;switch(e){case Ae.END:u=S;break;case Ae.CENTER:u=f-(t-o.size)/2;break;case Ae.START:u=f;break;default:u=Math.max(S,Math.min(f,n))}const A=this.getTotalSize();return Math.max(0,Math.min(A-t,u))}getVisibleRangeOffsets(e=0,t){if(this.getTotalSize()===0)return{start:0,end:0};const l=t+e,o=t;let f=this.findNearestItem(t);if(f===void 0)throw Error(`Invalid offset ${t} specified`);const S=this.getSizeAndPositionForIndex(f);t=S.offset+S.size;let u=f;for(;t<l&&u<this.model.length-1;)u++,t+=this.getSizeAndPositionForIndex(u).size;return{startOffset:o,endOffset:t}}getVisibleRangeIndex(e=0,t,n){if(this.getTotalSize()===0)return{start:0,end:0};const o=t+e;let f=this.findNearestItem(t);if(f===void 0)throw Error(`Invalid offset ${t} specified`);const S=this.getSizeAndPositionForIndex(f);t=S.offset+S.size;let u=f;for(;t<o&&u<this.model.length-1;)u++,t+=this.getSizeAndPositionForIndex(u).size;return n&&(f=Math.max(0,f-n),u=Math.min(u+n,this.model.length-1)),{start:f,end:u}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,n,e):this.exponentialSearch(n,e)}binarySearch(e,t,n){let l=0,o=0;for(;e<=t;){if(l=e+Math.floor((t-e)/2),o=this.getSizeAndPositionForIndex(l).offset,o===n)return l;o<n?e=l+1:o>n&&(t=l-1)}return e>0?e-1:0}exponentialSearch(e,t){let n=1;for(;e<this.model.length&&this.getSizeAndPositionForIndex(e).offset<t;)e+=n,n*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.model.length-1),t)}}const tt=(()=>{let a=!1;try{const e=Object.defineProperty({},"passive",{get(){return a={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return a})();var it=Oe('<div><!> <div class="vtlist-inner"></div> <!></div>');function rt(a,e){we(e,!0);const t=I(e,"model",19,()=>[]),n=I(e,"windowOverPaddingCount",3,3),l=I(e,"isHorizontal",3,!1),o=I(e,"scrollToAlignment",19,()=>Ae.AUTO),f=I(e,"scrollToBehaviour",19,()=>Qe.INSTANT),S=I(e,"class",3,""),u=I(e,"style",3,""),A=new et(t(),e.sizeCalculator,e.estimatedItemSize);let L=K(0),B=K(0),z=!1,v,H=K(U([])),j=K(U({offset:e.scrollToOffset||e.scrollToIndex!==void 0&&J(e.scrollToIndex)||0,scrollChangeReason:ve.REQUESTED})),_={},C={scrollToIndex:e.scrollToIndex,scrollToAlignment:o(),scrollToOffset:e.scrollToOffset,sizeCalculator:e.sizeCalculator,estimatedItemSize:e.estimatedItemSize};const k=Y(()=>Me("overflow:auto;",u())),ne=Y(()=>{const{offset:c}=i(j),m=A.getVisibleRangeOffsets(l()?i(B):i(L),c),x=m.startOffset,X=m.endOffset;return Me("display:flex;",!l()&&"flex-direction:column;"||"flex-direction:row;",!l()&&`margin-top:${x}px;margin-bottom:${X}px`||`margin-left:${x}px;margin-right:${X}px;width:${A.getTotalSize()-X-x}px`)});he(()=>{e.scrollToIndex,o(),e.scrollToOffset,e.sizeCalculator,e.estimatedItemSize,G()}),he(()=>{const{offset:c,scrollChangeReason:m}=i(j);(_.offset!==c||_.scrollChangeReason!==m)&&M(),_.offset!==c&&m===ve.REQUESTED&&se(c),_=i(j)}),he(()=>{i(L),i(B),z&&p(0)}),_e(()=>{v.addEventListener("scroll",V,tt),e.scrollToOffset!==void 0?se(e.scrollToOffset):e.scrollToIndex!==void 0&&se(J(e.scrollToIndex)),M(),z=!0}),Fe(()=>{z&&v.removeEventListener("scroll",V)});function G(){if(!z)return;e.scrollToIndex&&e.scrollToOffset&&console.log("VirtualList: scrollToIndex and scrollToOffset MUST NOT be used together.");const c=C.scrollToIndex!==e.scrollToIndex||C.scrollToAlignment!==o(),m=C.sizeCalculator!==e.sizeCalculator||C.estimatedItemSize!==e.estimatedItemSize;m&&(A.mutateState(e.sizeCalculator,t(),e.estimatedItemSize),p()),C.scrollToOffset!==e.scrollToOffset?y(j,U({offset:e.scrollToOffset||0,scrollChangeReason:ve.REQUESTED})):typeof e.scrollToIndex=="number"&&(c||m)&&y(j,U({offset:J(e.scrollToIndex,o()),scrollChangeReason:ve.REQUESTED})),C={scrollToIndex:e.scrollToIndex,scrollToAlignment:o(),scrollToOffset:e.scrollToOffset,sizeCalculator:e.sizeCalculator,estimatedItemSize:e.estimatedItemSize}}function M(){const{offset:c}=i(j);let{start:m,end:x}=A.getVisibleRangeIndex(l()?i(B):i(L),c,n()),X=[];if(m!==void 0&&x!==void 0){for(let d=m;d<=x;(d+=1)-1)X.push({item:t()[d],index:d});if(e.onVisibleRangeUpdate){const d=A.getVisibleRangeIndex(l()?i(B):i(L),c,0);e.onVisibleRangeUpdate({type:"range.update",start:d.start,end:d.end})}}y(H,U(X))}function se(c){if("scroll"in v){const m={behavior:f()};m[l()?"left":"top"]=c,v.scroll(m)}else v[l()?"scrollLeft":"scrollTop"]=c}function p(c=0){A.resetItem(c),M()}function J(c,m=o()){return c<0?c=0:c>=t().length&&(c=t().length-1),A.getUpdatedOffsetForIndex(m,l()?i(B):i(L),i(j).offset||0,c)}const V=c=>{const m=l()?v.scrollLeft:v.scrollTop;m<0||i(j).offset===m||c.target!==v||(y(j,U({offset:m,scrollChangeReason:ve.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:m,event:c}))};var Q=it();Pe(Q,c=>v=c,()=>v);var ae=Te(Q);ie(ae,()=>e.header,c=>{var m=w(),x=P(m);q(x,()=>e.header),T(c,m)});var le=fe(ae,2);Ie(le,21,()=>i(H),xe,(c,m)=>{var x=w(),X=P(x),d=Le(()=>({index:e.getKey?e.getKey(i(m).index):i(m).index,item:i(m).item,size:A.itemSizeAndPositionData[i(m).index].size}));q(X,()=>e.slot,()=>i(d)),T(c,x)}),ce(le);var $=fe(le,2);return ie($,()=>e.footer,c=>{var m=w(),x=P(m);q(x,()=>e.footer),T(c,m)}),ce(Q),Ce(()=>{Be(Q,`vtlist $${S()??""}`),Ee(Q,"style",i(k)),Ee(le,"style",i(ne))}),Re(Q,"clientHeight",c=>y(L,c)),Re(Q,"clientWidth",c=>y(B,c)),T(a,Q),Ue({recomputeSizes:p})}var Qe=(a=>(a.AUTO="auto",a.SMOOTH="smooth",a.INSTANT="instant",a))(Qe||{}),Ae=(a=>(a.AUTO="auto",a.START="start",a.CENTER="center",a.END="end",a))(Ae||{}),ve=(a=>(a[a.OBSERVED=0]="OBSERVED",a[a.REQUESTED=1]="REQUESTED",a))(ve||{});export{ge as A,Z as D,Ve as S,lt as V,at as a,Ae as b,Qe as c,rt as d};
